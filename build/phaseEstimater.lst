ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"phaseEstimater.cpp"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Drivers/CPP/Src/phaseEstimater.cpp"
  20              		.section	.text.init_phase_estimater,"ax",%progbits
  21              		.align	1
  22              		.global	init_phase_estimater
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	init_phase_estimater:
  28              	.LFB1275:
   1:Drivers/CPP/Src/phaseEstimater.cpp **** /**
   2:Drivers/CPP/Src/phaseEstimater.cpp ****   ******************************************************************************
   3:Drivers/CPP/Src/phaseEstimater.cpp ****   * @file    adc.c
   4:Drivers/CPP/Src/phaseEstimater.cpp ****   * @brief   This file provides code for the configuration
   5:Drivers/CPP/Src/phaseEstimater.cpp ****   *          of the ADC instances.
   6:Drivers/CPP/Src/phaseEstimater.cpp ****   ******************************************************************************
   7:Drivers/CPP/Src/phaseEstimater.cpp ****   * @attention
   8:Drivers/CPP/Src/phaseEstimater.cpp ****   *
   9:Drivers/CPP/Src/phaseEstimater.cpp ****   * <h2><center>&copy; Copyright (c) 2021 STMicroelectronics.
  10:Drivers/CPP/Src/phaseEstimater.cpp ****   * All rights reserved.</center></h2>
  11:Drivers/CPP/Src/phaseEstimater.cpp ****   *
  12:Drivers/CPP/Src/phaseEstimater.cpp ****   * This software component is licensed by ST under BSD 3-Clause license,
  13:Drivers/CPP/Src/phaseEstimater.cpp ****   * the "License"; You may not use this file except in compliance with the
  14:Drivers/CPP/Src/phaseEstimater.cpp ****   * License. You may obtain a copy of the License at:
  15:Drivers/CPP/Src/phaseEstimater.cpp ****   *                        opensource.org/licenses/BSD-3-Clause
  16:Drivers/CPP/Src/phaseEstimater.cpp ****   *
  17:Drivers/CPP/Src/phaseEstimater.cpp ****   ******************************************************************************
  18:Drivers/CPP/Src/phaseEstimater.cpp ****   */
  19:Drivers/CPP/Src/phaseEstimater.cpp **** 
  20:Drivers/CPP/Src/phaseEstimater.cpp **** /* Includes ------------------------------------------------------------------*/
  21:Drivers/CPP/Src/phaseEstimater.cpp **** #include "phaseEstimater.h"
  22:Drivers/CPP/Src/phaseEstimater.cpp **** #include "SVM.h"
  23:Drivers/CPP/Src/phaseEstimater.cpp **** #include "encoder.h"
  24:Drivers/CPP/Src/phaseEstimater.cpp **** #include "main.h"
  25:Drivers/CPP/Src/phaseEstimater.cpp **** #include "tim.h"
  26:Drivers/CPP/Src/phaseEstimater.cpp **** #include "global_var.h"
  27:Drivers/CPP/Src/phaseEstimater.cpp **** #include <string.h>
  28:Drivers/CPP/Src/phaseEstimater.cpp **** #include <stdio.h>
  29:Drivers/CPP/Src/phaseEstimater.cpp **** #include <stdlib.h>
  30:Drivers/CPP/Src/phaseEstimater.cpp **** #include <math.h>
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 2


  31:Drivers/CPP/Src/phaseEstimater.cpp **** #include "uart_debug.h"
  32:Drivers/CPP/Src/phaseEstimater.cpp ****  
  33:Drivers/CPP/Src/phaseEstimater.cpp **** static uint16_t phase=0;
  34:Drivers/CPP/Src/phaseEstimater.cpp **** 
  35:Drivers/CPP/Src/phaseEstimater.cpp **** //#define SectorA 4 0�   offset
  36:Drivers/CPP/Src/phaseEstimater.cpp **** //#define SectorB 6 60�  offset
  37:Drivers/CPP/Src/phaseEstimater.cpp **** //#define SectorC 2 120� offset
  38:Drivers/CPP/Src/phaseEstimater.cpp **** //#define SectorD 3 180� offset
  39:Drivers/CPP/Src/phaseEstimater.cpp **** //#define SectorE 1 240� offset
  40:Drivers/CPP/Src/phaseEstimater.cpp **** //#define SectorF 5 300� offset
  41:Drivers/CPP/Src/phaseEstimater.cpp **** //																		//E   C   D   A F   B   X   X
  42:Drivers/CPP/Src/phaseEstimater.cpp **** //uint16_t HallSecotor_phase_offset[8]={255,240,120,180,0,300,60,255};
  43:Drivers/CPP/Src/phaseEstimater.cpp **** 
  44:Drivers/CPP/Src/phaseEstimater.cpp **** 																				//E   C   D   A F   B   X   X
  45:Drivers/CPP/Src/phaseEstimater.cpp **** //uint16_t HallSector_phase_offset[8]={255,350,230,275,93,35,156,255};
  46:Drivers/CPP/Src/phaseEstimater.cpp **** uint16_t  HallSector_Averages[8]={1};
  47:Drivers/CPP/Src/phaseEstimater.cpp **** uint16_t HallSector_phase_offset[8]={255};
  48:Drivers/CPP/Src/phaseEstimater.cpp **** uint16_t HallSector_phase_span[8]={0};
  49:Drivers/CPP/Src/phaseEstimater.cpp **** 
  50:Drivers/CPP/Src/phaseEstimater.cpp **** void init_phase_estimater(){
  29              		.loc 1 50 28 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  51:Drivers/CPP/Src/phaseEstimater.cpp **** 	__HAL_TIM_DISABLE(&SectorTIM);
  34              		.loc 1 51 2 view .LVU1
  35              		.loc 1 51 2 view .LVU2
  36 0000 0D4B     		ldr	r3, .L3
  37 0002 1B68     		ldr	r3, [r3]
  38 0004 196A     		ldr	r1, [r3, #32]
  39 0006 41F21112 		movw	r2, #4369
  40 000a 1142     		tst	r1, r2
  41 000c 08D1     		bne	.L2
  42              		.loc 1 51 2 discriminator 1 view .LVU3
  43 000e 196A     		ldr	r1, [r3, #32]
  44 0010 44F24442 		movw	r2, #17476
  45 0014 1142     		tst	r1, r2
  46 0016 03D1     		bne	.L2
  47              		.loc 1 51 2 discriminator 3 view .LVU4
  48 0018 1A68     		ldr	r2, [r3]
  49 001a 22F00102 		bic	r2, r2, #1
  50 001e 1A60     		str	r2, [r3]
  51              	.L2:
  52              		.loc 1 51 2 discriminator 2 view .LVU5
  52:Drivers/CPP/Src/phaseEstimater.cpp **** 	SectorTIM.Instance->ARR=65535;
  53              		.loc 1 52 2 view .LVU6
  54              		.loc 1 52 12 is_stmt 0 view .LVU7
  55 0020 054B     		ldr	r3, .L3
  56 0022 1B68     		ldr	r3, [r3]
  57              		.loc 1 52 25 view .LVU8
  58 0024 4FF6FF72 		movw	r2, #65535
  59 0028 DA62     		str	r2, [r3, #44]
  53:Drivers/CPP/Src/phaseEstimater.cpp **** 	SectorTIM.Instance->PSC=6;
  60              		.loc 1 53 2 is_stmt 1 view .LVU9
  61              		.loc 1 53 25 is_stmt 0 view .LVU10
  62 002a 0622     		movs	r2, #6
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 3


  63 002c 9A62     		str	r2, [r3, #40]
  54:Drivers/CPP/Src/phaseEstimater.cpp **** 	__HAL_TIM_ENABLE(&SectorTIM);
  64              		.loc 1 54 2 is_stmt 1 view .LVU11
  65 002e 1A68     		ldr	r2, [r3]
  66 0030 42F00102 		orr	r2, r2, #1
  67 0034 1A60     		str	r2, [r3]
  55:Drivers/CPP/Src/phaseEstimater.cpp **** }
  68              		.loc 1 55 1 is_stmt 0 view .LVU12
  69 0036 7047     		bx	lr
  70              	.L4:
  71              		.align	2
  72              	.L3:
  73 0038 00000000 		.word	htim6
  74              		.cfi_endproc
  75              	.LFE1275:
  77              		.section	.text.initialize_Hallsensor_phase_estimator,"ax",%progbits
  78              		.align	1
  79              		.global	initialize_Hallsensor_phase_estimator
  80              		.syntax unified
  81              		.thumb
  82              		.thumb_func
  84              	initialize_Hallsensor_phase_estimator:
  85              	.LVL0:
  86              	.LFB1276:
  56:Drivers/CPP/Src/phaseEstimater.cpp **** 
  57:Drivers/CPP/Src/phaseEstimater.cpp **** uint16_t time_between_sectors=0;
  58:Drivers/CPP/Src/phaseEstimater.cpp **** 
  59:Drivers/CPP/Src/phaseEstimater.cpp **** // make Pin State Global to see them on STM Studio
  60:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HALL1 = 0;
  61:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HALL2 = 0;
  62:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HALL3 = 0;
  63:Drivers/CPP/Src/phaseEstimater.cpp **** 
  64:Drivers/CPP/Src/phaseEstimater.cpp **** uint16_t initialize_Hallsensor_phase_estimator(uint16_t setpoint){
  87              		.loc 1 64 66 is_stmt 1 view -0
  88              		.cfi_startproc
  89              		@ args = 0, pretend = 0, frame = 0
  90              		@ frame_needed = 0, uses_anonymous_args = 0
  91              		.loc 1 64 66 is_stmt 0 view .LVU14
  92 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
  93              	.LCFI0:
  94              		.cfi_def_cfa_offset 32
  95              		.cfi_offset 3, -32
  96              		.cfi_offset 4, -28
  97              		.cfi_offset 5, -24
  98              		.cfi_offset 6, -20
  99              		.cfi_offset 7, -16
 100              		.cfi_offset 8, -12
 101              		.cfi_offset 9, -8
 102              		.cfi_offset 14, -4
 103 0004 0446     		mov	r4, r0
  65:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint16_t init_done=0;
 104              		.loc 1 65 2 is_stmt 1 view .LVU15
 105              	.LVL1:
  66:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HallSector=0;
 106              		.loc 1 66 2 view .LVU16
  67:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint16_t in_toleranz_count=0;
 107              		.loc 1 67 2 view .LVU17
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 4


  68:Drivers/CPP/Src/phaseEstimater.cpp **** 
  69:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint16_t voltage_phase=0;
 108              		.loc 1 69 2 view .LVU18
  70:Drivers/CPP/Src/phaseEstimater.cpp **** 
  71:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint8_t init=0;
 109              		.loc 1 71 2 view .LVU19
  72:Drivers/CPP/Src/phaseEstimater.cpp **** 
  73:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint8_t lock_HALL1=0;
 110              		.loc 1 73 2 view .LVU20
  74:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint8_t lock_HALL2=0;
 111              		.loc 1 74 2 view .LVU21
  75:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint8_t lock_HALL3=0;
 112              		.loc 1 75 2 view .LVU22
  76:Drivers/CPP/Src/phaseEstimater.cpp **** 
  77:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint16_t phase_old=0;
 113              		.loc 1 77 2 view .LVU23
  78:Drivers/CPP/Src/phaseEstimater.cpp **** 
  79:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint8_t prev_Sector=0;
 114              		.loc 1 79 2 view .LVU24
  80:Drivers/CPP/Src/phaseEstimater.cpp **** 
  81:Drivers/CPP/Src/phaseEstimater.cpp **** 	if(!init){
 115              		.loc 1 81 2 view .LVU25
 116              		.loc 1 81 5 is_stmt 0 view .LVU26
 117 0006 A84B     		ldr	r3, .L46
 118 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 119              		.loc 1 81 2 view .LVU27
 120 000a 53B9     		cbnz	r3, .L6
  82:Drivers/CPP/Src/phaseEstimater.cpp **** 		// configure Sector Tim to Output a 10Hz Sinewave;
  83:Drivers/CPP/Src/phaseEstimater.cpp **** 		SectorTIM.Instance-> ARR= 360;
 121              		.loc 1 83 3 is_stmt 1 view .LVU28
 122              		.loc 1 83 13 is_stmt 0 view .LVU29
 123 000c A74B     		ldr	r3, .L46+4
 124 000e 1B68     		ldr	r3, [r3]
 125              		.loc 1 83 27 view .LVU30
 126 0010 4FF4B472 		mov	r2, #360
 127 0014 DA62     		str	r2, [r3, #44]
  84:Drivers/CPP/Src/phaseEstimater.cpp **** 		SectorTIM.Instance-> PSC = 10000;
 128              		.loc 1 84 3 is_stmt 1 view .LVU31
 129              		.loc 1 84 28 is_stmt 0 view .LVU32
 130 0016 42F21072 		movw	r2, #10000
 131 001a 9A62     		str	r2, [r3, #40]
  85:Drivers/CPP/Src/phaseEstimater.cpp **** 		init=1;
 132              		.loc 1 85 3 is_stmt 1 view .LVU33
 133              		.loc 1 85 7 is_stmt 0 view .LVU34
 134 001c A24B     		ldr	r3, .L46
 135 001e 0122     		movs	r2, #1
 136 0020 1A70     		strb	r2, [r3]
 137              	.L6:
  86:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
  87:Drivers/CPP/Src/phaseEstimater.cpp **** 
  88:Drivers/CPP/Src/phaseEstimater.cpp **** 	voltage_phase = SectorTIM.Instance->CNT;
 138              		.loc 1 88 2 is_stmt 1 view .LVU35
 139              		.loc 1 88 28 is_stmt 0 view .LVU36
 140 0022 A24B     		ldr	r3, .L46+4
 141 0024 1B68     		ldr	r3, [r3]
 142              		.loc 1 88 38 view .LVU37
 143 0026 5B6A     		ldr	r3, [r3, #36]
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 5


 144              		.loc 1 88 16 view .LVU38
 145 0028 9BB2     		uxth	r3, r3
 146 002a A14A     		ldr	r2, .L46+8
 147 002c 1380     		strh	r3, [r2]	@ movhi
  89:Drivers/CPP/Src/phaseEstimater.cpp **** 	Motor.rotorphase=voltage_phase;
 148              		.loc 1 89 2 is_stmt 1 view .LVU39
 149              		.loc 1 89 18 is_stmt 0 view .LVU40
 150 002e A14A     		ldr	r2, .L46+12
 151 0030 1380     		strh	r3, [r2]	@ movhi
  90:Drivers/CPP/Src/phaseEstimater.cpp **** 	HALL1 = (HALL1<<1)|HAL_GPIO_ReadPin(HALL1_GPIO_Port,HALL1_Pin);
 152              		.loc 1 90 2 is_stmt 1 view .LVU41
 153              		.loc 1 90 20 is_stmt 0 view .LVU42
 154 0032 A14E     		ldr	r6, .L46+16
 155 0034 3578     		ldrb	r5, [r6]	@ zero_extendqisi2
 156              		.loc 1 90 37 view .LVU43
 157 0036 A14F     		ldr	r7, .L46+20
 158 0038 4021     		movs	r1, #64
 159 003a 3846     		mov	r0, r7
 160              	.LVL2:
 161              		.loc 1 90 37 view .LVU44
 162 003c FFF7FEFF 		bl	HAL_GPIO_ReadPin
 163              	.LVL3:
 164              		.loc 1 90 20 discriminator 1 view .LVU45
 165 0040 40EA4500 		orr	r0, r0, r5, lsl #1
 166              		.loc 1 90 8 discriminator 1 view .LVU46
 167 0044 3070     		strb	r0, [r6]
  91:Drivers/CPP/Src/phaseEstimater.cpp **** 	HALL2 = (HALL2<<1)|HAL_GPIO_ReadPin(HALL2_GPIO_Port,HALL2_Pin);
 168              		.loc 1 91 2 is_stmt 1 view .LVU47
 169              		.loc 1 91 20 is_stmt 0 view .LVU48
 170 0046 9E4D     		ldr	r5, .L46+24
 171 0048 95F80080 		ldrb	r8, [r5]	@ zero_extendqisi2
 172              		.loc 1 91 37 view .LVU49
 173 004c 8021     		movs	r1, #128
 174 004e 3846     		mov	r0, r7
 175 0050 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 176              	.LVL4:
 177              		.loc 1 91 20 discriminator 1 view .LVU50
 178 0054 40EA4800 		orr	r0, r0, r8, lsl #1
 179              		.loc 1 91 8 discriminator 1 view .LVU51
 180 0058 2870     		strb	r0, [r5]
  92:Drivers/CPP/Src/phaseEstimater.cpp **** 	HALL3 = (HALL3<<1)|HAL_GPIO_ReadPin(HALL3_GPIO_Port,HALL3_Pin);
 181              		.loc 1 92 2 is_stmt 1 view .LVU52
 182              		.loc 1 92 20 is_stmt 0 view .LVU53
 183 005a DFF89082 		ldr	r8, .L46+68
 184 005e 98F80090 		ldrb	r9, [r8]	@ zero_extendqisi2
 185              		.loc 1 92 37 view .LVU54
 186 0062 4FF48071 		mov	r1, #256
 187 0066 3846     		mov	r0, r7
 188 0068 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 189              	.LVL5:
 190              		.loc 1 92 20 discriminator 1 view .LVU55
 191 006c 40EA4903 		orr	r3, r0, r9, lsl #1
 192 0070 DBB2     		uxtb	r3, r3
 193              		.loc 1 92 8 discriminator 1 view .LVU56
 194 0072 88F80030 		strb	r3, [r8]
  93:Drivers/CPP/Src/phaseEstimater.cpp **** 
  94:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HALL1_rising_edge =		  (HALL1&0x0F)==3;
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 6


 195              		.loc 1 94 2 is_stmt 1 view .LVU57
 196              		.loc 1 94 39 is_stmt 0 view .LVU58
 197 0076 3178     		ldrb	r1, [r6]	@ zero_extendqisi2
 198 0078 01F00F01 		and	r1, r1, #15
 199              		.loc 1 94 45 view .LVU59
 200 007c 0329     		cmp	r1, #3
 201 007e 14BF     		ite	ne
 202 0080 0020     		movne	r0, #0
 203 0082 0120     		moveq	r0, #1
 204              	.LVL6:
  95:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HALL1_falling_edge=	    (HALL1&0x0F)==14;
 205              		.loc 1 95 2 is_stmt 1 view .LVU60
 206              		.loc 1 95 46 is_stmt 0 view .LVU61
 207 0084 0E29     		cmp	r1, #14
 208 0086 14BF     		ite	ne
 209 0088 0026     		movne	r6, #0
 210 008a 0126     		moveq	r6, #1
 211              	.LVL7:
  96:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HALL2_rising_edge =		  (HALL2&0x0F)==3;
 212              		.loc 1 96 2 is_stmt 1 view .LVU62
 213              		.loc 1 96 39 is_stmt 0 view .LVU63
 214 008c 2A78     		ldrb	r2, [r5]	@ zero_extendqisi2
 215 008e 02F00F02 		and	r2, r2, #15
 216              		.loc 1 96 45 view .LVU64
 217 0092 032A     		cmp	r2, #3
 218 0094 14BF     		ite	ne
 219 0096 0025     		movne	r5, #0
 220 0098 0125     		moveq	r5, #1
 221              	.LVL8:
  97:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HALL2_falling_edge=	    (HALL2&0x0F)==14;
 222              		.loc 1 97 2 is_stmt 1 view .LVU65
 223              		.loc 1 97 46 is_stmt 0 view .LVU66
 224 009a 0E2A     		cmp	r2, #14
 225 009c 14BF     		ite	ne
 226 009e 0027     		movne	r7, #0
 227 00a0 0127     		moveq	r7, #1
 228              	.LVL9:
  98:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HALL3_rising_edge =		  (HALL3&0x0F)==3;
 229              		.loc 1 98 2 is_stmt 1 view .LVU67
 230 00a2 03F00F03 		and	r3, r3, #15
 231              		.loc 1 98 45 is_stmt 0 view .LVU68
 232 00a6 032B     		cmp	r3, #3
 233 00a8 14BF     		ite	ne
 234 00aa 4FF0000C 		movne	ip, #0
 235 00ae 4FF0010C 		moveq	ip, #1
 236              	.LVL10:
  99:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HALL3_falling_edge=	    (HALL3&0x0F)==14;
 237              		.loc 1 99 2 is_stmt 1 view .LVU69
 238              		.loc 1 99 46 is_stmt 0 view .LVU70
 239 00b2 0E2B     		cmp	r3, #14
 240 00b4 14BF     		ite	ne
 241 00b6 4FF0000E 		movne	lr, #0
 242 00ba 4FF0010E 		moveq	lr, #1
 243              	.LVL11:
 100:Drivers/CPP/Src/phaseEstimater.cpp **** 
 101:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t valid_signals=0;
 244              		.loc 1 101 2 is_stmt 1 view .LVU71
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 7


 102:Drivers/CPP/Src/phaseEstimater.cpp **** 
 103:Drivers/CPP/Src/phaseEstimater.cpp **** 	//Bei einer Flanke wenn diese nicht gerade gelockt ist
 104:Drivers/CPP/Src/phaseEstimater.cpp **** 	if((HALL1_falling_edge||HALL1_rising_edge)&&!lock_HALL1){
 245              		.loc 1 104 2 view .LVU72
 246 00be 0E29     		cmp	r1, #14
 247 00c0 5BD0     		beq	.L7
 248              		.loc 1 104 24 is_stmt 0 discriminator 2 view .LVU73
 249 00c2 0329     		cmp	r1, #3
 250 00c4 59D0     		beq	.L7
 101:Drivers/CPP/Src/phaseEstimater.cpp **** 
 251              		.loc 1 101 10 view .LVU74
 252 00c6 0021     		movs	r1, #0
 253              	.LVL12:
 254              	.L8:
 105:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=1;
 106:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=0;
 107:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=0;
 108:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 109:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 110:Drivers/CPP/Src/phaseEstimater.cpp **** 	//Bei einer Flanke wenn diese nicht gerade gelockt ist
 111:Drivers/CPP/Src/phaseEstimater.cpp **** 	if((HALL2_falling_edge||HALL2_rising_edge)&&!lock_HALL2){
 255              		.loc 1 111 2 is_stmt 1 view .LVU75
 256 00c8 0E2A     		cmp	r2, #14
 257 00ca 00F08180 		beq	.L10
 258              		.loc 1 111 24 is_stmt 0 discriminator 2 view .LVU76
 259 00ce 032A     		cmp	r2, #3
 260 00d0 7ED0     		beq	.L10
 261              	.LVL13:
 262              	.L11:
 112:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=0;
 113:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=1;
 114:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=0;
 115:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 116:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 117:Drivers/CPP/Src/phaseEstimater.cpp **** 	//Bei einer Flanke wenn diese nicht gerade gelockt ist
 118:Drivers/CPP/Src/phaseEstimater.cpp **** 	if((HALL3_falling_edge||HALL3_rising_edge)&&!lock_HALL3){
 263              		.loc 1 118 2 is_stmt 1 view .LVU77
 264 00d2 0E2B     		cmp	r3, #14
 265 00d4 00F0A280 		beq	.L13
 266              		.loc 1 118 24 is_stmt 0 discriminator 2 view .LVU78
 267 00d8 032B     		cmp	r3, #3
 268 00da 00F09F80 		beq	.L13
 269              	.L14:
 119:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=0;
 120:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=0;
 121:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=1;
 122:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 123:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 124:Drivers/CPP/Src/phaseEstimater.cpp **** 
 125:Drivers/CPP/Src/phaseEstimater.cpp **** 
 126:Drivers/CPP/Src/phaseEstimater.cpp **** 	if(valid_signals){
 270              		.loc 1 126 2 is_stmt 1 view .LVU79
 271 00de 0029     		cmp	r1, #0
 272 00e0 48D0     		beq	.L16
 273              	.L15:
 274              	.LVL14:
 127:Drivers/CPP/Src/phaseEstimater.cpp **** 		HAL_GPIO_TogglePin(GPIOB, GPIO_PIN_12);
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 8


 275              		.loc 1 127 3 view .LVU80
 276              		.loc 1 127 21 is_stmt 0 view .LVU81
 277 00e2 4FF48051 		mov	r1, #4096
 278 00e6 7748     		ldr	r0, .L46+28
 279              	.LVL15:
 280              		.loc 1 127 21 view .LVU82
 281 00e8 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 282              	.LVL16:
 128:Drivers/CPP/Src/phaseEstimater.cpp **** 
 129:Drivers/CPP/Src/phaseEstimater.cpp **** 		if(phase_old < voltage_phase){
 283              		.loc 1 129 3 is_stmt 1 view .LVU83
 284              		.loc 1 129 16 is_stmt 0 view .LVU84
 285 00ec 764B     		ldr	r3, .L46+32
 286 00ee 1B88     		ldrh	r3, [r3]
 287 00f0 6F4A     		ldr	r2, .L46+8
 288 00f2 1288     		ldrh	r2, [r2]
 289              		.loc 1 129 3 view .LVU85
 290 00f4 9342     		cmp	r3, r2
 291 00f6 80F0B280 		bcs	.L17
 130:Drivers/CPP/Src/phaseEstimater.cpp **** 			time_between_sectors = voltage_phase - phase_old;
 292              		.loc 1 130 4 is_stmt 1 view .LVU86
 293              		.loc 1 130 41 is_stmt 0 view .LVU87
 294 00fa D31A     		subs	r3, r2, r3
 295              		.loc 1 130 25 view .LVU88
 296 00fc 7349     		ldr	r1, .L46+36
 297 00fe 0B80     		strh	r3, [r1]	@ movhi
 298              	.L18:
 131:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 132:Drivers/CPP/Src/phaseEstimater.cpp **** 		else{
 133:Drivers/CPP/Src/phaseEstimater.cpp **** 			time_between_sectors =360 - (phase_old - voltage_phase);
 134:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 135:Drivers/CPP/Src/phaseEstimater.cpp **** 		phase_old = voltage_phase;
 299              		.loc 1 135 3 is_stmt 1 view .LVU89
 300              		.loc 1 135 13 is_stmt 0 view .LVU90
 301 0100 714B     		ldr	r3, .L46+32
 302 0102 1A80     		strh	r2, [r3]	@ movhi
 136:Drivers/CPP/Src/phaseEstimater.cpp **** 		// Get the current Hallsektor 
 137:Drivers/CPP/Src/phaseEstimater.cpp **** 		HallSector = (HAL_GPIO_ReadPin(HALL3_GPIO_Port,HALL3_Pin)<<2)|(HAL_GPIO_ReadPin(HALL2_GPIO_Port,H
 303              		.loc 1 137 3 is_stmt 1 view .LVU91
 304              		.loc 1 137 33 is_stmt 0 view .LVU92
 305 0104 6D4E     		ldr	r6, .L46+20
 306              	.LVL17:
 307              		.loc 1 137 33 view .LVU93
 308 0106 4FF48071 		mov	r1, #256
 309 010a 3046     		mov	r0, r6
 310 010c FFF7FEFF 		bl	HAL_GPIO_ReadPin
 311              	.LVL18:
 312 0110 0746     		mov	r7, r0
 313              	.LVL19:
 314              		.loc 1 137 82 discriminator 1 view .LVU94
 315 0112 8021     		movs	r1, #128
 316 0114 3046     		mov	r0, r6
 317 0116 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 318              	.LVL20:
 319              		.loc 1 137 64 discriminator 2 view .LVU95
 320 011a 4500     		lsls	r5, r0, #1
 321              	.LVL21:
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 9


 322              		.loc 1 137 64 discriminator 2 view .LVU96
 323 011c 45EA8705 		orr	r5, r5, r7, lsl #2
 324 0120 6DB2     		sxtb	r5, r5
 325              		.loc 1 137 131 discriminator 2 view .LVU97
 326 0122 4021     		movs	r1, #64
 327 0124 3046     		mov	r0, r6
 328 0126 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 329              	.LVL22:
 330              		.loc 1 137 14 discriminator 3 view .LVU98
 331 012a 2843     		orrs	r0, r0, r5
 332 012c C0B2     		uxtb	r0, r0
 333              	.LVL23:
 138:Drivers/CPP/Src/phaseEstimater.cpp **** 
 139:Drivers/CPP/Src/phaseEstimater.cpp **** 		// Check if the sector is actually possible, the sectors should be spaced apart by 60�
 140:Drivers/CPP/Src/phaseEstimater.cpp **** 		if(time_between_sectors>45 && time_between_sectors <75){
 334              		.loc 1 140 3 is_stmt 1 view .LVU99
 335              		.loc 1 140 30 is_stmt 0 view .LVU100
 336 012e 674B     		ldr	r3, .L46+36
 337 0130 1B88     		ldrh	r3, [r3]
 338 0132 2E3B     		subs	r3, r3, #46
 339 0134 9BB2     		uxth	r3, r3
 340              		.loc 1 140 3 view .LVU101
 341 0136 1C2B     		cmp	r3, #28
 342 0138 1AD8     		bhi	.L19
 141:Drivers/CPP/Src/phaseEstimater.cpp **** 
 142:Drivers/CPP/Src/phaseEstimater.cpp **** 			HallSector_phase_offset[HallSector] = (HallSector_Averages[HallSector] * voltage_phase) /(HallSe
 343              		.loc 1 142 4 is_stmt 1 view .LVU102
 344              		.loc 1 142 73 is_stmt 0 view .LVU103
 345 013a 654D     		ldr	r5, .L46+40
 346 013c 35F81020 		ldrh	r2, [r5, r0, lsl #1]
 347              		.loc 1 142 77 view .LVU104
 348 0140 5B4B     		ldr	r3, .L46+8
 349 0142 1B88     		ldrh	r3, [r3]
 350              		.loc 1 142 75 view .LVU105
 351 0144 02FB03F3 		mul	r3, r2, r3
 352              		.loc 1 142 126 view .LVU106
 353 0148 0132     		adds	r2, r2, #1
 354              		.loc 1 142 92 view .LVU107
 355 014a 93FBF2F3 		sdiv	r3, r3, r2
 356              		.loc 1 142 40 view .LVU108
 357 014e 9BB2     		uxth	r3, r3
 358 0150 6049     		ldr	r1, .L46+44
 359 0152 21F81030 		strh	r3, [r1, r0, lsl #1]	@ movhi
 143:Drivers/CPP/Src/phaseEstimater.cpp **** 			HallSector_Averages[HallSector] ++;
 360              		.loc 1 143 4 is_stmt 1 view .LVU109
 361              		.loc 1 143 36 is_stmt 0 view .LVU110
 362 0156 25F81020 		strh	r2, [r5, r0, lsl #1]	@ movhi
 144:Drivers/CPP/Src/phaseEstimater.cpp **** 
 145:Drivers/CPP/Src/phaseEstimater.cpp **** 			if( HallSector_phase_offset[HallSector]>HallSector_phase_offset[prev_Sector]){
 363              		.loc 1 145 4 is_stmt 1 view .LVU111
 364              		.loc 1 145 68 is_stmt 0 view .LVU112
 365 015a 5F4A     		ldr	r2, .L46+48
 366 015c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 367              		.loc 1 145 79 view .LVU113
 368 015e 31F81220 		ldrh	r2, [r1, r2, lsl #1]
 369              		.loc 1 145 4 view .LVU114
 370 0162 9342     		cmp	r3, r2
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 10


 371 0164 40F28180 		bls	.L20
 146:Drivers/CPP/Src/phaseEstimater.cpp **** 				// calculate the phase span of the previous Sektor
 147:Drivers/CPP/Src/phaseEstimater.cpp **** 				HallSector_phase_span[HallSector] = HallSector_phase_offset[HallSector]-HallSector_phase_offset
 372              		.loc 1 147 5 is_stmt 1 view .LVU115
 373              		.loc 1 147 76 is_stmt 0 view .LVU116
 374 0168 9B1A     		subs	r3, r3, r2
 375              		.loc 1 147 39 view .LVU117
 376 016a 5C4A     		ldr	r2, .L46+52
 377 016c 22F81030 		strh	r3, [r2, r0, lsl #1]	@ movhi
 378              	.L19:
 148:Drivers/CPP/Src/phaseEstimater.cpp **** 			}
 149:Drivers/CPP/Src/phaseEstimater.cpp **** 			else {
 150:Drivers/CPP/Src/phaseEstimater.cpp **** 				HallSector_phase_span[HallSector] =(360 + HallSector_phase_offset[HallSector]) - HallSector_pha
 151:Drivers/CPP/Src/phaseEstimater.cpp **** 			}
 152:Drivers/CPP/Src/phaseEstimater.cpp **** 
 153:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 154:Drivers/CPP/Src/phaseEstimater.cpp **** 		prev_Sector = HallSector;
 379              		.loc 1 154 3 is_stmt 1 view .LVU118
 380              		.loc 1 154 15 is_stmt 0 view .LVU119
 381 0170 594B     		ldr	r3, .L46+48
 382 0172 1870     		strb	r0, [r3]
 383              	.LVL24:
 384              	.L16:
 155:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 156:Drivers/CPP/Src/phaseEstimater.cpp **** 
 157:Drivers/CPP/Src/phaseEstimater.cpp **** 	for(int i=0; i<8;i++){
 385              		.loc 1 157 2 is_stmt 1 view .LVU120
 386              	.LBB2:
 387              		.loc 1 157 10 is_stmt 0 view .LVU121
 388 0174 0023     		movs	r3, #0
 389              	.LBE2:
  67:Drivers/CPP/Src/phaseEstimater.cpp **** 
 390              		.loc 1 67 11 view .LVU122
 391 0176 1946     		mov	r1, r3
 392              	.LBB3:
 393              		.loc 1 157 2 view .LVU123
 394 0178 7FE0     		b	.L21
 395              	.LVL25:
 396              	.L7:
 397              		.loc 1 157 2 view .LVU124
 398              	.LBE3:
 104:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=1;
 399              		.loc 1 104 46 discriminator 3 view .LVU125
 400 017a 5949     		ldr	r1, .L46+56
 401 017c 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
 104:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=1;
 402              		.loc 1 104 44 discriminator 3 view .LVU126
 403 017e 29BB     		cbnz	r1, .L29
 105:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=0;
 404              		.loc 1 105 3 is_stmt 1 view .LVU127
 105:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=0;
 405              		.loc 1 105 13 is_stmt 0 view .LVU128
 406 0180 5749     		ldr	r1, .L46+56
 407 0182 4FF00108 		mov	r8, #1
 408 0186 81F80080 		strb	r8, [r1]
 106:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=0;
 409              		.loc 1 106 3 is_stmt 1 view .LVU129
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 11


 106:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=0;
 410              		.loc 1 106 13 is_stmt 0 view .LVU130
 411 018a 0021     		movs	r1, #0
 412 018c DFF85481 		ldr	r8, .L46+60
 413 0190 88F80010 		strb	r1, [r8]
 107:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 414              		.loc 1 107 3 is_stmt 1 view .LVU131
 107:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 415              		.loc 1 107 13 is_stmt 0 view .LVU132
 416 0194 DFF85081 		ldr	r8, .L46+64
 417 0198 88F80010 		strb	r1, [r8]
 108:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 418              		.loc 1 108 3 is_stmt 1 view .LVU133
 108:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 419              		.loc 1 108 148 is_stmt 0 view .LVU134
 420 019c 50B9     		cbnz	r0, .L30
 108:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 421              		.loc 1 108 42 discriminator 2 view .LVU135
 422 019e 5EB9     		cbnz	r6, .L31
 108:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 423              		.loc 1 108 69 discriminator 4 view .LVU136
 424 01a0 65B9     		cbnz	r5, .L32
 108:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 425              		.loc 1 108 95 discriminator 6 view .LVU137
 426 01a2 6FB9     		cbnz	r7, .L33
 108:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 427              		.loc 1 108 122 discriminator 8 view .LVU138
 428 01a4 BCF1000F 		cmp	ip, #0
 429 01a8 0CD1     		bne	.L34
 108:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 430              		.loc 1 108 148 discriminator 10 view .LVU139
 431 01aa BEF1000F 		cmp	lr, #0
 432 01ae 0BD0     		beq	.L35
 108:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 433              		.loc 1 108 148 discriminator 11 view .LVU140
 434 01b0 0121     		movs	r1, #1
 435 01b2 89E7     		b	.L8
 436              	.L30:
 437 01b4 0121     		movs	r1, #1
 438 01b6 87E7     		b	.L8
 439              	.L31:
 440 01b8 0121     		movs	r1, #1
 441 01ba 85E7     		b	.L8
 442              	.L32:
 443 01bc 0121     		movs	r1, #1
 444 01be 83E7     		b	.L8
 445              	.L33:
 446 01c0 0121     		movs	r1, #1
 447 01c2 81E7     		b	.L8
 448              	.L34:
 449 01c4 0121     		movs	r1, #1
 450 01c6 7FE7     		b	.L8
 451              	.L35:
 108:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 452              		.loc 1 108 148 discriminator 12 view .LVU141
 453 01c8 0021     		movs	r1, #0
 454              	.LVL26:
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 12


 108:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 455              		.loc 1 108 148 discriminator 12 view .LVU142
 456 01ca 7DE7     		b	.L8
 457              	.LVL27:
 458              	.L29:
 101:Drivers/CPP/Src/phaseEstimater.cpp **** 
 459              		.loc 1 101 10 view .LVU143
 460 01cc 0021     		movs	r1, #0
 461 01ce 7BE7     		b	.L8
 462              	.LVL28:
 463              	.L10:
 111:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=0;
 464              		.loc 1 111 46 discriminator 3 view .LVU144
 465 01d0 444A     		ldr	r2, .L46+60
 466 01d2 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 111:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=0;
 467              		.loc 1 111 44 discriminator 3 view .LVU145
 468 01d4 002A     		cmp	r2, #0
 469 01d6 7FF47CAF 		bne	.L11
 112:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=1;
 470              		.loc 1 112 3 is_stmt 1 view .LVU146
 112:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=1;
 471              		.loc 1 112 13 is_stmt 0 view .LVU147
 472 01da 4149     		ldr	r1, .L46+56
 473              	.LVL29:
 112:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=1;
 474              		.loc 1 112 13 view .LVU148
 475 01dc 0A70     		strb	r2, [r1]
 113:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=0;
 476              		.loc 1 113 3 is_stmt 1 view .LVU149
 113:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=0;
 477              		.loc 1 113 13 is_stmt 0 view .LVU150
 478 01de 4149     		ldr	r1, .L46+60
 479 01e0 4FF00108 		mov	r8, #1
 480 01e4 81F80080 		strb	r8, [r1]
 114:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 481              		.loc 1 114 3 is_stmt 1 view .LVU151
 114:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 482              		.loc 1 114 13 is_stmt 0 view .LVU152
 483 01e8 3F49     		ldr	r1, .L46+64
 484 01ea 0A70     		strb	r2, [r1]
 115:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 485              		.loc 1 115 3 is_stmt 1 view .LVU153
 115:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 486              		.loc 1 115 148 is_stmt 0 view .LVU154
 487 01ec 50B9     		cbnz	r0, .L36
 115:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 488              		.loc 1 115 42 discriminator 2 view .LVU155
 489 01ee 5EB9     		cbnz	r6, .L37
 115:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 490              		.loc 1 115 69 discriminator 4 view .LVU156
 491 01f0 65B9     		cbnz	r5, .L38
 115:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 492              		.loc 1 115 95 discriminator 6 view .LVU157
 493 01f2 6FB9     		cbnz	r7, .L39
 115:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 494              		.loc 1 115 122 discriminator 8 view .LVU158
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 13


 495 01f4 BCF1000F 		cmp	ip, #0
 496 01f8 0CD1     		bne	.L40
 115:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 497              		.loc 1 115 148 discriminator 10 view .LVU159
 498 01fa BEF1000F 		cmp	lr, #0
 499 01fe 0BD0     		beq	.L41
 115:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 500              		.loc 1 115 148 discriminator 11 view .LVU160
 501 0200 4146     		mov	r1, r8
 502 0202 66E7     		b	.L11
 503              	.L36:
 504 0204 0121     		movs	r1, #1
 505 0206 64E7     		b	.L11
 506              	.L37:
 507 0208 0121     		movs	r1, #1
 508 020a 62E7     		b	.L11
 509              	.L38:
 510 020c 0121     		movs	r1, #1
 511 020e 60E7     		b	.L11
 512              	.L39:
 513 0210 0121     		movs	r1, #1
 514 0212 5EE7     		b	.L11
 515              	.L40:
 516 0214 0121     		movs	r1, #1
 517 0216 5CE7     		b	.L11
 518              	.L41:
 115:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 519              		.loc 1 115 148 discriminator 12 view .LVU161
 520 0218 0021     		movs	r1, #0
 521              	.LVL30:
 115:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 522              		.loc 1 115 148 discriminator 12 view .LVU162
 523 021a 5AE7     		b	.L11
 524              	.L13:
 118:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=0;
 525              		.loc 1 118 46 discriminator 3 view .LVU163
 526 021c 324B     		ldr	r3, .L46+64
 527 021e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 118:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=0;
 528              		.loc 1 118 44 discriminator 3 view .LVU164
 529 0220 002B     		cmp	r3, #0
 530 0222 7FF45CAF 		bne	.L14
 119:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=0;
 531              		.loc 1 119 3 is_stmt 1 view .LVU165
 119:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=0;
 532              		.loc 1 119 13 is_stmt 0 view .LVU166
 533 0226 2E4A     		ldr	r2, .L46+56
 534 0228 1370     		strb	r3, [r2]
 120:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=1;
 535              		.loc 1 120 3 is_stmt 1 view .LVU167
 120:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=1;
 536              		.loc 1 120 13 is_stmt 0 view .LVU168
 537 022a 2E4A     		ldr	r2, .L46+60
 538 022c 1370     		strb	r3, [r2]
 121:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 539              		.loc 1 121 3 is_stmt 1 view .LVU169
 121:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 14


 540              		.loc 1 121 13 is_stmt 0 view .LVU170
 541 022e 2E4B     		ldr	r3, .L46+64
 542 0230 0122     		movs	r2, #1
 543 0232 1A70     		strb	r2, [r3]
 122:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 544              		.loc 1 122 3 is_stmt 1 view .LVU171
 122:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 545              		.loc 1 122 148 is_stmt 0 view .LVU172
 546 0234 0028     		cmp	r0, #0
 547 0236 7FF454AF 		bne	.L15
 122:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 548              		.loc 1 122 42 discriminator 2 view .LVU173
 549 023a 002E     		cmp	r6, #0
 550 023c 7FF451AF 		bne	.L15
 122:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 551              		.loc 1 122 69 discriminator 4 view .LVU174
 552 0240 002D     		cmp	r5, #0
 553 0242 7FF44EAF 		bne	.L15
 122:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 554              		.loc 1 122 95 discriminator 6 view .LVU175
 555 0246 002F     		cmp	r7, #0
 556 0248 7FF44BAF 		bne	.L15
 122:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 557              		.loc 1 122 122 discriminator 8 view .LVU176
 558 024c BCF1000F 		cmp	ip, #0
 559 0250 7FF447AF 		bne	.L15
 122:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 560              		.loc 1 122 148 discriminator 10 view .LVU177
 561 0254 BEF1000F 		cmp	lr, #0
 562 0258 7FF443AF 		bne	.L15
 563 025c 8AE7     		b	.L16
 564              	.LVL31:
 565              	.L17:
 133:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 566              		.loc 1 133 4 is_stmt 1 view .LVU178
 133:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 567              		.loc 1 133 30 is_stmt 0 view .LVU179
 568 025e D31A     		subs	r3, r2, r3
 569 0260 03F5B473 		add	r3, r3, #360
 133:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 570              		.loc 1 133 25 view .LVU180
 571 0264 1949     		ldr	r1, .L46+36
 572 0266 0B80     		strh	r3, [r1]	@ movhi
 573 0268 4AE7     		b	.L18
 574              	.LVL32:
 575              	.L20:
 150:Drivers/CPP/Src/phaseEstimater.cpp **** 			}
 576              		.loc 1 150 5 is_stmt 1 view .LVU181
 150:Drivers/CPP/Src/phaseEstimater.cpp **** 			}
 577              		.loc 1 150 84 is_stmt 0 view .LVU182
 578 026a 9B1A     		subs	r3, r3, r2
 579 026c 03F5B473 		add	r3, r3, #360
 150:Drivers/CPP/Src/phaseEstimater.cpp **** 			}
 580              		.loc 1 150 39 view .LVU183
 581 0270 1A4A     		ldr	r2, .L46+52
 582 0272 22F81030 		strh	r3, [r2, r0, lsl #1]	@ movhi
 583 0276 7BE7     		b	.L19
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 15


 584              	.LVL33:
 585              	.L22:
 586              	.LBB4:
 587              		.loc 1 157 2 is_stmt 1 discriminator 2 view .LVU184
 588 0278 0133     		adds	r3, r3, #1
 589              	.LVL34:
 590              	.L21:
 591              		.loc 1 157 16 discriminator 1 view .LVU185
 592 027a 072B     		cmp	r3, #7
 593 027c 08DC     		bgt	.L44
 158:Drivers/CPP/Src/phaseEstimater.cpp **** 		if(HallSector_Averages[i] >= 256) {
 594              		.loc 1 158 3 view .LVU186
 595              		.loc 1 158 27 is_stmt 0 view .LVU187
 596 027e 144A     		ldr	r2, .L46+40
 597 0280 32F813C0 		ldrh	ip, [r2, r3, lsl #1]
 598              		.loc 1 158 3 view .LVU188
 599 0284 BCF1FF0F 		cmp	ip, #255
 600 0288 F6D9     		bls	.L22
 159:Drivers/CPP/Src/phaseEstimater.cpp **** 			in_toleranz_count++;
 601              		.loc 1 159 4 is_stmt 1 view .LVU189
 602              		.loc 1 159 21 is_stmt 0 view .LVU190
 603 028a 0131     		adds	r1, r1, #1
 604              	.LVL35:
 605              		.loc 1 159 21 view .LVU191
 606 028c 89B2     		uxth	r1, r1
 607              	.LVL36:
 608              		.loc 1 159 21 view .LVU192
 609 028e F3E7     		b	.L22
 610              	.L44:
 611              		.loc 1 159 21 view .LVU193
 612              	.LBE4:
 160:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 161:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 162:Drivers/CPP/Src/phaseEstimater.cpp **** 
 163:Drivers/CPP/Src/phaseEstimater.cpp **** 	if(in_toleranz_count==6){
 613              		.loc 1 163 2 is_stmt 1 view .LVU194
 614              	.LBB5:
 615 0290 0629     		cmp	r1, #6
 616 0292 3AD0     		beq	.L42
 617              	.LBE5:
  65:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HallSector=0;
 618              		.loc 1 65 11 is_stmt 0 view .LVU195
 619 0294 0025     		movs	r5, #0
 620              	.LVL37:
 621              	.L25:
 164:Drivers/CPP/Src/phaseEstimater.cpp **** 		init_done=1;
 165:Drivers/CPP/Src/phaseEstimater.cpp **** 		for(int i=0;i<8;i++){
 166:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(HallSector_Averages[i]<256){
 167:Drivers/CPP/Src/phaseEstimater.cpp **** 				HallSector_phase_offset[i]=255;	// Für ungültige Sektoren wird die Zahl 255 verwendet
 168:Drivers/CPP/Src/phaseEstimater.cpp **** 			}
 169:Drivers/CPP/Src/phaseEstimater.cpp **** 			else{
 170:Drivers/CPP/Src/phaseEstimater.cpp **** 				// UART_transmit_string("Hallsektor: ");
 171:Drivers/CPP/Src/phaseEstimater.cpp **** 				// UART_transmit_ui32(i);
 172:Drivers/CPP/Src/phaseEstimater.cpp **** 				// UART_transmit_string(" Offset: ");
 173:Drivers/CPP/Src/phaseEstimater.cpp **** 				// UART_transmit_ui32(HallSector_phase_offset[i]);
 174:Drivers/CPP/Src/phaseEstimater.cpp **** 				// UART_transmit_string(" Phasespan: ");
 175:Drivers/CPP/Src/phaseEstimater.cpp **** 				// UART_transmit_ui32(HallSector_phase_span[i]);
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 16


 176:Drivers/CPP/Src/phaseEstimater.cpp **** 				// UART_transmit_crlf();
 177:Drivers/CPP/Src/phaseEstimater.cpp **** 			}
 178:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 179:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 180:Drivers/CPP/Src/phaseEstimater.cpp **** 
 181:Drivers/CPP/Src/phaseEstimater.cpp **** 	setVoltageVector(voltage_phase, 0, setpoint);
 622              		.loc 1 181 2 is_stmt 1 view .LVU196
 623              		.loc 1 181 18 is_stmt 0 view .LVU197
 624 0296 2246     		mov	r2, r4
 625 0298 0021     		movs	r1, #0
 626 029a 054B     		ldr	r3, .L46+8
 627 029c 1888     		ldrh	r0, [r3]
 628 029e FFF7FEFF 		bl	setVoltageVector
 629              	.LVL38:
 182:Drivers/CPP/Src/phaseEstimater.cpp **** 
 183:Drivers/CPP/Src/phaseEstimater.cpp **** 	return init_done;
 630              		.loc 1 183 2 is_stmt 1 view .LVU198
 184:Drivers/CPP/Src/phaseEstimater.cpp **** }
 631              		.loc 1 184 1 is_stmt 0 view .LVU199
 632 02a2 2846     		mov	r0, r5
 633 02a4 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 634              	.LVL39:
 635              	.L47:
 636              		.loc 1 184 1 view .LVU200
 637              		.align	2
 638              	.L46:
 639 02a8 00000000 		.word	_ZZ37initialize_Hallsensor_phase_estimatorE4init
 640 02ac 00000000 		.word	htim6
 641 02b0 00000000 		.word	_ZZ37initialize_Hallsensor_phase_estimatorE13voltage_phase
 642 02b4 00000000 		.word	Motor
 643 02b8 00000000 		.word	HALL1
 644 02bc 00080048 		.word	1207961600
 645 02c0 00000000 		.word	HALL2
 646 02c4 00040048 		.word	1207960576
 647 02c8 00000000 		.word	_ZZ37initialize_Hallsensor_phase_estimatorE9phase_old
 648 02cc 00000000 		.word	time_between_sectors
 649 02d0 00000000 		.word	HallSector_Averages
 650 02d4 00000000 		.word	HallSector_phase_offset
 651 02d8 00000000 		.word	_ZZ37initialize_Hallsensor_phase_estimatorE11prev_Sector
 652 02dc 00000000 		.word	HallSector_phase_span
 653 02e0 00000000 		.word	_ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL1
 654 02e4 00000000 		.word	_ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL2
 655 02e8 00000000 		.word	_ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL3
 656 02ec 00000000 		.word	HALL3
 657              	.LVL40:
 658              	.L26:
 659              	.LBB8:
 660              	.LBB6:
 661              	.LBB7:
 165:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(HallSector_Averages[i]<256){
 662              		.loc 1 165 3 is_stmt 1 discriminator 2 view .LVU201
 663 02f0 0133     		adds	r3, r3, #1
 664              	.LVL41:
 665              	.L24:
 165:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(HallSector_Averages[i]<256){
 666              		.loc 1 165 16 discriminator 1 view .LVU202
 667 02f2 072B     		cmp	r3, #7
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 17


 668 02f4 0BDC     		bgt	.L45
 166:Drivers/CPP/Src/phaseEstimater.cpp **** 				HallSector_phase_offset[i]=255;	// Für ungültige Sektoren wird die Zahl 255 verwendet
 669              		.loc 1 166 4 view .LVU203
 166:Drivers/CPP/Src/phaseEstimater.cpp **** 				HallSector_phase_offset[i]=255;	// Für ungültige Sektoren wird die Zahl 255 verwendet
 670              		.loc 1 166 28 is_stmt 0 view .LVU204
 671 02f6 074A     		ldr	r2, .L48
 672 02f8 32F81320 		ldrh	r2, [r2, r3, lsl #1]
 166:Drivers/CPP/Src/phaseEstimater.cpp **** 				HallSector_phase_offset[i]=255;	// Für ungültige Sektoren wird die Zahl 255 verwendet
 673              		.loc 1 166 4 view .LVU205
 674 02fc FF2A     		cmp	r2, #255
 675 02fe F7D8     		bhi	.L26
 167:Drivers/CPP/Src/phaseEstimater.cpp **** 			}
 676              		.loc 1 167 5 is_stmt 1 view .LVU206
 167:Drivers/CPP/Src/phaseEstimater.cpp **** 			}
 677              		.loc 1 167 31 is_stmt 0 view .LVU207
 678 0300 054A     		ldr	r2, .L48+4
 679 0302 FF21     		movs	r1, #255
 680 0304 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 681 0308 F2E7     		b	.L26
 682              	.LVL42:
 683              	.L42:
 165:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(HallSector_Averages[i]<256){
 684              		.loc 1 165 11 view .LVU208
 685 030a 0023     		movs	r3, #0
 686              	.LVL43:
 165:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(HallSector_Averages[i]<256){
 687              		.loc 1 165 11 view .LVU209
 688 030c F1E7     		b	.L24
 689              	.LVL44:
 690              	.L45:
 165:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(HallSector_Averages[i]<256){
 691              		.loc 1 165 11 view .LVU210
 692              	.LBE7:
 164:Drivers/CPP/Src/phaseEstimater.cpp **** 		for(int i=0;i<8;i++){
 693              		.loc 1 164 12 view .LVU211
 694 030e 0125     		movs	r5, #1
 695 0310 C1E7     		b	.L25
 696              	.L49:
 697 0312 00BF     		.align	2
 698              	.L48:
 699 0314 00000000 		.word	HallSector_Averages
 700 0318 00000000 		.word	HallSector_phase_offset
 701              	.LBE6:
 702              	.LBE8:
 703              		.cfi_endproc
 704              	.LFE1276:
 706              		.section	.text.estimate_rotor_phase,"ax",%progbits
 707              		.align	1
 708              		.global	estimate_rotor_phase
 709              		.syntax unified
 710              		.thumb
 711              		.thumb_func
 713              	estimate_rotor_phase:
 714              	.LVL45:
 715              	.LFB1277:
 185:Drivers/CPP/Src/phaseEstimater.cpp **** 
 186:Drivers/CPP/Src/phaseEstimater.cpp **** 
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 18


 187:Drivers/CPP/Src/phaseEstimater.cpp **** static uint8_t block_commutation_active=1;
 188:Drivers/CPP/Src/phaseEstimater.cpp **** static uint16_t Prev_Sector_times[8]={0};
 189:Drivers/CPP/Src/phaseEstimater.cpp **** int16_t rate_of_change = 0;
 190:Drivers/CPP/Src/phaseEstimater.cpp **** int32_t avg_rate_of_change=1024;
 191:Drivers/CPP/Src/phaseEstimater.cpp **** 
 192:Drivers/CPP/Src/phaseEstimater.cpp **** 
 193:Drivers/CPP/Src/phaseEstimater.cpp **** void estimate_rotor_phase(motor_TypeDef* motor){
 716              		.loc 1 193 48 is_stmt 1 view -0
 717              		.cfi_startproc
 718              		@ args = 0, pretend = 0, frame = 0
 719              		@ frame_needed = 0, uses_anonymous_args = 0
 720              		.loc 1 193 48 is_stmt 0 view .LVU213
 721 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 722              	.LCFI1:
 723              		.cfi_def_cfa_offset 32
 724              		.cfi_offset 4, -32
 725              		.cfi_offset 5, -28
 726              		.cfi_offset 6, -24
 727              		.cfi_offset 7, -20
 728              		.cfi_offset 8, -16
 729              		.cfi_offset 9, -12
 730              		.cfi_offset 10, -8
 731              		.cfi_offset 14, -4
 732 0004 0446     		mov	r4, r0
 194:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint8_t init=0;
 733              		.loc 1 194 2 is_stmt 1 view .LVU214
 195:Drivers/CPP/Src/phaseEstimater.cpp **** 
 196:Drivers/CPP/Src/phaseEstimater.cpp **** 	if(!init){
 734              		.loc 1 196 2 view .LVU215
 735              		.loc 1 196 5 is_stmt 0 view .LVU216
 736 0006 AA4B     		ldr	r3, .L90
 737 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 738              		.loc 1 196 2 view .LVU217
 739 000a 002B     		cmp	r3, #0
 740 000c 00F0BE80 		beq	.L89
 741              	.LVL46:
 742              	.L51:
 197:Drivers/CPP/Src/phaseEstimater.cpp **** 		//init_phase_estimater();
 198:Drivers/CPP/Src/phaseEstimater.cpp **** 		MX_TIM6_Init();
 199:Drivers/CPP/Src/phaseEstimater.cpp **** 		init=1;
 200:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 201:Drivers/CPP/Src/phaseEstimater.cpp **** 
 202:Drivers/CPP/Src/phaseEstimater.cpp **** 
 203:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint8_t HallSector=0;
 743              		.loc 1 203 2 is_stmt 1 view .LVU218
 204:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint16_t newSectorTime=0;
 744              		.loc 1 204 2 view .LVU219
 205:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint16_t SectorTime=0;
 745              		.loc 1 205 2 view .LVU220
 206:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint16_t PreviousHallSector=0;
 746              		.loc 1 206 2 view .LVU221
 207:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint16_t CurrentSectorTime=SectorTIM.Instance->CNT;
 747              		.loc 1 207 2 view .LVU222
 748              		.loc 1 207 39 is_stmt 0 view .LVU223
 749 0010 A84B     		ldr	r3, .L90+4
 750 0012 1B68     		ldr	r3, [r3]
 751              		.loc 1 207 49 view .LVU224
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 19


 752 0014 5D6A     		ldr	r5, [r3, #36]
 753              	.LVL47:
 208:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint16_t prev_phase=0;
 754              		.loc 1 208 2 is_stmt 1 view .LVU225
 209:Drivers/CPP/Src/phaseEstimater.cpp **** 
 210:Drivers/CPP/Src/phaseEstimater.cpp **** 	
 211:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint8_t HALL1 = 0;
 755              		.loc 1 211 2 view .LVU226
 212:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint8_t HALL2 = 0;
 756              		.loc 1 212 2 view .LVU227
 213:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint8_t HALL3 = 0;
 757              		.loc 1 213 2 view .LVU228
 214:Drivers/CPP/Src/phaseEstimater.cpp **** 	
 215:Drivers/CPP/Src/phaseEstimater.cpp **** /*	static uint8_t HALL1_pinstate = 0;
 216:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint8_t HALL2_pinstate = 0;
 217:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint8_t HALL3_pinstate = 0;*/
 218:Drivers/CPP/Src/phaseEstimater.cpp **** 												 
 219:Drivers/CPP/Src/phaseEstimater.cpp ****  HALL1 = (HALL1<<1)|HAL_GPIO_ReadPin(HALL1_GPIO_Port,HALL1_Pin);
 758              		.loc 1 219 2 view .LVU229
 759              		.loc 1 219 20 is_stmt 0 view .LVU230
 760 0016 A84F     		ldr	r7, .L90+8
 761 0018 3E78     		ldrb	r6, [r7]	@ zero_extendqisi2
 762              		.loc 1 219 37 view .LVU231
 763 001a DFF8A492 		ldr	r9, .L90+16
 764 001e 4021     		movs	r1, #64
 765 0020 4846     		mov	r0, r9
 766 0022 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 767              	.LVL48:
 768              		.loc 1 219 20 discriminator 1 view .LVU232
 769 0026 40EA4600 		orr	r0, r0, r6, lsl #1
 770              		.loc 1 219 8 discriminator 1 view .LVU233
 771 002a 3870     		strb	r0, [r7]
 220:Drivers/CPP/Src/phaseEstimater.cpp ****  HALL2 = (HALL2<<1)|HAL_GPIO_ReadPin(HALL2_GPIO_Port,HALL2_Pin);
 772              		.loc 1 220 2 is_stmt 1 view .LVU234
 773              		.loc 1 220 20 is_stmt 0 view .LVU235
 774 002c A34E     		ldr	r6, .L90+12
 775 002e 96F80080 		ldrb	r8, [r6]	@ zero_extendqisi2
 776              		.loc 1 220 37 view .LVU236
 777 0032 8021     		movs	r1, #128
 778 0034 4846     		mov	r0, r9
 779 0036 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 780              	.LVL49:
 781              		.loc 1 220 20 discriminator 1 view .LVU237
 782 003a 40EA4800 		orr	r0, r0, r8, lsl #1
 783              		.loc 1 220 8 discriminator 1 view .LVU238
 784 003e 3070     		strb	r0, [r6]
 221:Drivers/CPP/Src/phaseEstimater.cpp ****  HALL3 = (HALL3<<1)|HAL_GPIO_ReadPin(HALL3_GPIO_Port,HALL3_Pin);
 785              		.loc 1 221 2 is_stmt 1 view .LVU239
 786              		.loc 1 221 20 is_stmt 0 view .LVU240
 787 0040 DFF8B082 		ldr	r8, .L90+68
 788 0044 98F800A0 		ldrb	r10, [r8]	@ zero_extendqisi2
 789              		.loc 1 221 37 view .LVU241
 790 0048 4FF48071 		mov	r1, #256
 791 004c 4846     		mov	r0, r9
 792 004e FFF7FEFF 		bl	HAL_GPIO_ReadPin
 793              	.LVL50:
 794              		.loc 1 221 20 discriminator 1 view .LVU242
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 20


 795 0052 40EA4A03 		orr	r3, r0, r10, lsl #1
 796 0056 DBB2     		uxtb	r3, r3
 797              		.loc 1 221 8 discriminator 1 view .LVU243
 798 0058 88F80030 		strb	r3, [r8]
 222:Drivers/CPP/Src/phaseEstimater.cpp **** 
 223:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HALL1_rising_edge =		  (HALL1&0x0F)==3;
 799              		.loc 1 223 2 is_stmt 1 view .LVU244
 800              		.loc 1 223 39 is_stmt 0 view .LVU245
 801 005c 3978     		ldrb	r1, [r7]	@ zero_extendqisi2
 802 005e 01F00F01 		and	r1, r1, #15
 803              		.loc 1 223 45 view .LVU246
 804 0062 0329     		cmp	r1, #3
 805 0064 14BF     		ite	ne
 806 0066 0020     		movne	r0, #0
 807 0068 0120     		moveq	r0, #1
 808              	.LVL51:
 224:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HALL1_falling_edge=	    (HALL1&0x0F)==14;
 809              		.loc 1 224 2 is_stmt 1 view .LVU247
 810              		.loc 1 224 46 is_stmt 0 view .LVU248
 811 006a 0E29     		cmp	r1, #14
 812 006c 14BF     		ite	ne
 813 006e 0027     		movne	r7, #0
 814 0070 0127     		moveq	r7, #1
 815              	.LVL52:
 225:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HALL2_rising_edge =		  (HALL2&0x0F)==3;
 816              		.loc 1 225 2 is_stmt 1 view .LVU249
 817              		.loc 1 225 39 is_stmt 0 view .LVU250
 818 0072 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 819 0074 02F00F02 		and	r2, r2, #15
 820              		.loc 1 225 45 view .LVU251
 821 0078 032A     		cmp	r2, #3
 822 007a 14BF     		ite	ne
 823 007c 0026     		movne	r6, #0
 824 007e 0126     		moveq	r6, #1
 825              	.LVL53:
 226:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HALL2_falling_edge=	    (HALL2&0x0F)==14;
 826              		.loc 1 226 2 is_stmt 1 view .LVU252
 827              		.loc 1 226 46 is_stmt 0 view .LVU253
 828 0080 0E2A     		cmp	r2, #14
 829 0082 14BF     		ite	ne
 830 0084 4FF0000C 		movne	ip, #0
 831 0088 4FF0010C 		moveq	ip, #1
 832              	.LVL54:
 227:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HALL3_rising_edge =		  (HALL3&0x0F)==3;
 833              		.loc 1 227 2 is_stmt 1 view .LVU254
 834 008c 03F00F03 		and	r3, r3, #15
 835              		.loc 1 227 45 is_stmt 0 view .LVU255
 836 0090 032B     		cmp	r3, #3
 837 0092 14BF     		ite	ne
 838 0094 4FF0000E 		movne	lr, #0
 839 0098 4FF0010E 		moveq	lr, #1
 840              	.LVL55:
 228:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t HALL3_falling_edge=	    (HALL3&0x0F)==14;
 841              		.loc 1 228 2 is_stmt 1 view .LVU256
 842              		.loc 1 228 46 is_stmt 0 view .LVU257
 843 009c 0E2B     		cmp	r3, #14
 844 009e 14BF     		ite	ne
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 21


 845 00a0 4FF00008 		movne	r8, #0
 846 00a4 4FF00108 		moveq	r8, #1
 847              	.LVL56:
 229:Drivers/CPP/Src/phaseEstimater.cpp **** 	
 230:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint8_t valid_signals = 0;// (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_ed
 848              		.loc 1 230 2 is_stmt 1 view .LVU258
 231:Drivers/CPP/Src/phaseEstimater.cpp **** 
 232:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint8_t lock_HALL1=0;
 849              		.loc 1 232 2 view .LVU259
 233:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint8_t lock_HALL2=0;
 850              		.loc 1 233 2 view .LVU260
 234:Drivers/CPP/Src/phaseEstimater.cpp **** 	static uint8_t lock_HALL3=0;
 851              		.loc 1 234 2 view .LVU261
 235:Drivers/CPP/Src/phaseEstimater.cpp **** 
 236:Drivers/CPP/Src/phaseEstimater.cpp **** 	//Bei einer Flanke wenn diese nicht gerade gelockt ist
 237:Drivers/CPP/Src/phaseEstimater.cpp **** 	if((HALL1_falling_edge||HALL1_rising_edge)&&!lock_HALL1){
 852              		.loc 1 237 2 view .LVU262
 853 00a8 0E29     		cmp	r1, #14
 854 00aa 75D0     		beq	.L52
 855              		.loc 1 237 24 is_stmt 0 discriminator 2 view .LVU263
 856 00ac 0329     		cmp	r1, #3
 857 00ae 73D0     		beq	.L52
 230:Drivers/CPP/Src/phaseEstimater.cpp **** 
 858              		.loc 1 230 10 view .LVU264
 859 00b0 0021     		movs	r1, #0
 860              	.LVL57:
 861              	.L53:
 238:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=1;
 239:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=0;
 240:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=0;
 241:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 242:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 243:Drivers/CPP/Src/phaseEstimater.cpp **** 	//Bei einer Flanke wenn diese nicht gerade gelockt ist
 244:Drivers/CPP/Src/phaseEstimater.cpp **** 	if((HALL2_falling_edge||HALL2_rising_edge)&&!lock_HALL2){
 862              		.loc 1 244 2 is_stmt 1 view .LVU265
 863 00b2 0E2A     		cmp	r2, #14
 864 00b4 00F09D80 		beq	.L55
 865              		.loc 1 244 24 is_stmt 0 discriminator 2 view .LVU266
 866 00b8 032A     		cmp	r2, #3
 867 00ba 00F09A80 		beq	.L55
 868              	.LVL58:
 869              	.L56:
 245:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=0;
 246:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=1;
 247:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=0;
 248:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 249:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 250:Drivers/CPP/Src/phaseEstimater.cpp **** 	//Bei einer Flanke wenn diese nicht gerade gelockt ist
 251:Drivers/CPP/Src/phaseEstimater.cpp **** 	if((HALL3_falling_edge||HALL3_rising_edge)&&!lock_HALL3){
 870              		.loc 1 251 2 is_stmt 1 view .LVU267
 871 00be 0E2B     		cmp	r3, #14
 872 00c0 00F0BF80 		beq	.L58
 873              		.loc 1 251 24 is_stmt 0 discriminator 2 view .LVU268
 874 00c4 032B     		cmp	r3, #3
 875 00c6 00F0BC80 		beq	.L58
 876              	.L59:
 252:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=0;
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 22


 253:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=0;
 254:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=1;
 255:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 256:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 257:Drivers/CPP/Src/phaseEstimater.cpp **** 
 258:Drivers/CPP/Src/phaseEstimater.cpp **** 	
 259:Drivers/CPP/Src/phaseEstimater.cpp **** 	if(valid_signals){
 877              		.loc 1 259 2 is_stmt 1 view .LVU269
 878 00ca A9B1     		cbz	r1, .L61
 879              	.L60:
 880              	.LVL59:
 260:Drivers/CPP/Src/phaseEstimater.cpp **** 		HallSector = (HAL_GPIO_ReadPin(HALL3_GPIO_Port,HALL3_Pin)<<2)|(HAL_GPIO_ReadPin(HALL2_GPIO_Port,H
 881              		.loc 1 260 3 view .LVU270
 882              		.loc 1 260 33 is_stmt 0 view .LVU271
 883 00cc 7C4F     		ldr	r7, .L90+16
 884              	.LVL60:
 885              		.loc 1 260 33 view .LVU272
 886 00ce 4FF48071 		mov	r1, #256
 887 00d2 3846     		mov	r0, r7
 888              	.LVL61:
 889              		.loc 1 260 33 view .LVU273
 890 00d4 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 891              	.LVL62:
 892              		.loc 1 260 33 view .LVU274
 893 00d8 8046     		mov	r8, r0
 894              	.LVL63:
 895              		.loc 1 260 82 discriminator 1 view .LVU275
 896 00da 8021     		movs	r1, #128
 897 00dc 3846     		mov	r0, r7
 898 00de FFF7FEFF 		bl	HAL_GPIO_ReadPin
 899              	.LVL64:
 900              		.loc 1 260 64 discriminator 2 view .LVU276
 901 00e2 4600     		lsls	r6, r0, #1
 902              	.LVL65:
 903              		.loc 1 260 64 discriminator 2 view .LVU277
 904 00e4 46EA8806 		orr	r6, r6, r8, lsl #2
 905 00e8 76B2     		sxtb	r6, r6
 906              		.loc 1 260 131 discriminator 2 view .LVU278
 907 00ea 4021     		movs	r1, #64
 908 00ec 3846     		mov	r0, r7
 909 00ee FFF7FEFF 		bl	HAL_GPIO_ReadPin
 910              	.LVL66:
 911              		.loc 1 260 113 discriminator 3 view .LVU279
 912 00f2 3043     		orrs	r0, r0, r6
 913              		.loc 1 260 14 discriminator 3 view .LVU280
 914 00f4 734B     		ldr	r3, .L90+20
 915 00f6 1870     		strb	r0, [r3]
 916              	.L61:
 261:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 262:Drivers/CPP/Src/phaseEstimater.cpp **** 	
 263:Drivers/CPP/Src/phaseEstimater.cpp **** 	
 264:Drivers/CPP/Src/phaseEstimater.cpp **** 	uint16_t offset= HallSector_phase_offset[HallSector];
 917              		.loc 1 264 2 is_stmt 1 view .LVU281
 918              		.loc 1 264 43 is_stmt 0 view .LVU282
 919 00f8 724B     		ldr	r3, .L90+20
 920 00fa 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 921              		.loc 1 264 11 view .LVU283
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 23


 922 00fc 724B     		ldr	r3, .L90+24
 923 00fe 33F81210 		ldrh	r1, [r3, r2, lsl #1]
 924              	.LVL67:
 265:Drivers/CPP/Src/phaseEstimater.cpp **** 	
 266:Drivers/CPP/Src/phaseEstimater.cpp **** 	if(offset!=255){																				// valid Sector
 925              		.loc 1 266 2 is_stmt 1 view .LVU284
 926 0102 FF29     		cmp	r1, #255
 927 0104 00F00E81 		beq	.L62
 267:Drivers/CPP/Src/phaseEstimater.cpp **** 		if(HallSector!=PreviousHallSector){										// Sector changed
 928              		.loc 1 267 3 view .LVU285
 929              		.loc 1 267 18 is_stmt 0 view .LVU286
 930 0108 704B     		ldr	r3, .L90+28
 931 010a 1B88     		ldrh	r3, [r3]
 932              		.loc 1 267 3 view .LVU287
 933 010c 9A42     		cmp	r2, r3
 934 010e 0ED0     		beq	.L63
 268:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(__HAL_TIM_GET_FLAG(&SectorTIM,TIM_FLAG_UPDATE)){	// Timer overflowed
 935              		.loc 1 268 4 is_stmt 1 view .LVU288
 936              		.loc 1 268 7 is_stmt 0 view .LVU289
 937 0110 6848     		ldr	r0, .L90+4
 938 0112 0068     		ldr	r0, [r0]
 939 0114 0669     		ldr	r6, [r0, #16]
 940              		.loc 1 268 4 view .LVU290
 941 0116 16F0010F 		tst	r6, #1
 942 011a 00F0B480 		beq	.L64
 269:Drivers/CPP/Src/phaseEstimater.cpp **** 				__HAL_TIM_CLEAR_FLAG(&SectorTIM,TIM_FLAG_UPDATE);
 943              		.loc 1 269 5 is_stmt 1 view .LVU291
 944 011e 6FF00103 		mvn	r3, #1
 945 0122 0361     		str	r3, [r0, #16]
 270:Drivers/CPP/Src/phaseEstimater.cpp **** 				block_commutation_active=1;
 946              		.loc 1 270 5 view .LVU292
 947              		.loc 1 270 29 is_stmt 0 view .LVU293
 948 0124 6A4B     		ldr	r3, .L90+32
 949 0126 0126     		movs	r6, #1
 950 0128 1E70     		strb	r6, [r3]
 951              	.L65:
 271:Drivers/CPP/Src/phaseEstimater.cpp **** 			}
 272:Drivers/CPP/Src/phaseEstimater.cpp **** 			else{
 273:Drivers/CPP/Src/phaseEstimater.cpp **** 				// inhibit false sectorchanges due to artefacts in the Hall signal.
 274:Drivers/CPP/Src/phaseEstimater.cpp **** 				
 275:Drivers/CPP/Src/phaseEstimater.cpp **** 				// if the sector changes to quickly (artefacts) then don`t reset the hall sector time;
 276:Drivers/CPP/Src/phaseEstimater.cpp **** 				if(SectorTime >= (Prev_Sector_times[PreviousHallSector]>>1)){
 277:Drivers/CPP/Src/phaseEstimater.cpp **** 				SectorTime = SectorTIM.Instance->CNT;							  // Secure the Sector Time
 278:Drivers/CPP/Src/phaseEstimater.cpp **** 				Prev_Sector_times[PreviousHallSector] = SectorTime;				// The Measured Sector Time is form the 
 279:Drivers/CPP/Src/phaseEstimater.cpp **** 				block_commutation_active=0;
 280:Drivers/CPP/Src/phaseEstimater.cpp **** 				}
 281:Drivers/CPP/Src/phaseEstimater.cpp **** 			}
 282:Drivers/CPP/Src/phaseEstimater.cpp **** 			SectorTIM.Instance->CNT=0;													// reset counter
 952              		.loc 1 282 4 is_stmt 1 view .LVU294
 953              		.loc 1 282 27 is_stmt 0 view .LVU295
 954 012a 0023     		movs	r3, #0
 955 012c 4362     		str	r3, [r0, #36]
 956              	.L63:
 283:Drivers/CPP/Src/phaseEstimater.cpp **** 			//HAL_GPIO_TogglePin(GPIOA, GPIO_PIN_5);
 284:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 285:Drivers/CPP/Src/phaseEstimater.cpp **** 		
 286:Drivers/CPP/Src/phaseEstimater.cpp **** 		
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 24


 287:Drivers/CPP/Src/phaseEstimater.cpp **** 		if(block_commutation_active){
 957              		.loc 1 287 3 is_stmt 1 view .LVU296
 958              		.loc 1 287 6 is_stmt 0 view .LVU297
 959 012e 684B     		ldr	r3, .L90+32
 960 0130 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 961              		.loc 1 287 3 view .LVU298
 962 0132 002B     		cmp	r3, #0
 963 0134 00F0E080 		beq	.L66
 288:Drivers/CPP/Src/phaseEstimater.cpp **** 			motor->rotorphase = offset;
 964              		.loc 1 288 4 is_stmt 1 view .LVU299
 965              		.loc 1 288 22 is_stmt 0 view .LVU300
 966 0138 2180     		strh	r1, [r4]	@ movhi
 967              	.LVL68:
 968              	.L67:
 289:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 290:Drivers/CPP/Src/phaseEstimater.cpp **** 		else{
 291:Drivers/CPP/Src/phaseEstimater.cpp **** 			motor->rotorphase= offset + (CurrentSectorTime*HallSector_phase_span[HallSector])/Prev_Sector_ti
 292:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 293:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 294:Drivers/CPP/Src/phaseEstimater.cpp **** 		PreviousHallSector=HallSector;
 969              		.loc 1 294 3 is_stmt 1 view .LVU301
 970              		.loc 1 294 21 is_stmt 0 view .LVU302
 971 013a 644B     		ldr	r3, .L90+28
 972 013c 1A80     		strh	r2, [r3]	@ movhi
 973              	.L68:
 295:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 296:Drivers/CPP/Src/phaseEstimater.cpp **** 	else{
 297:Drivers/CPP/Src/phaseEstimater.cpp **** 		offset = HallSector_phase_offset[PreviousHallSector];
 298:Drivers/CPP/Src/phaseEstimater.cpp **** 		if(block_commutation_active){
 299:Drivers/CPP/Src/phaseEstimater.cpp **** 			motor->rotorphase = offset;
 300:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 301:Drivers/CPP/Src/phaseEstimater.cpp **** 		else{
 302:Drivers/CPP/Src/phaseEstimater.cpp **** 			motor->rotorphase= offset + (CurrentSectorTime*HallSector_phase_span[HallSector])/Prev_Sector_ti
 303:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 304:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 305:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 306:Drivers/CPP/Src/phaseEstimater.cpp **** 	
 307:Drivers/CPP/Src/phaseEstimater.cpp **** 	// Correct for glitches in the rotorphase
 308:Drivers/CPP/Src/phaseEstimater.cpp **** 
 309:Drivers/CPP/Src/phaseEstimater.cpp **** 	
 310:Drivers/CPP/Src/phaseEstimater.cpp **** 
 311:Drivers/CPP/Src/phaseEstimater.cpp **** 
 312:Drivers/CPP/Src/phaseEstimater.cpp **** 	if( prev_phase -  motor->rotorphase >300){
 974              		.loc 1 312 2 is_stmt 1 view .LVU303
 975              		.loc 1 312 6 is_stmt 0 view .LVU304
 976 013e 654B     		ldr	r3, .L90+36
 977 0140 1A88     		ldrh	r2, [r3]
 978              		.loc 1 312 27 view .LVU305
 979 0142 2388     		ldrh	r3, [r4]
 980              		.loc 1 312 17 view .LVU306
 981 0144 D11A     		subs	r1, r2, r3
 982              	.LVL69:
 983              		.loc 1 312 2 view .LVU307
 984 0146 B1F5967F 		cmp	r1, #300
 985 014a 40F30B81 		ble	.L70
 313:Drivers/CPP/Src/phaseEstimater.cpp **** 		rate_of_change = (motor->rotorphase+360)-prev_phase;
 986              		.loc 1 313 3 is_stmt 1 view .LVU308
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 25


 987              		.loc 1 313 43 is_stmt 0 view .LVU309
 988 014e 9B1A     		subs	r3, r3, r2
 989 0150 03F5B473 		add	r3, r3, #360
 990              		.loc 1 313 18 view .LVU310
 991 0154 6049     		ldr	r1, .L90+40
 992 0156 0B80     		strh	r3, [r1]	@ movhi
 993              	.L71:
 314:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 315:Drivers/CPP/Src/phaseEstimater.cpp **** 	else{
 316:Drivers/CPP/Src/phaseEstimater.cpp **** 		rate_of_change = motor->rotorphase-prev_phase;
 317:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 318:Drivers/CPP/Src/phaseEstimater.cpp **** 
 319:Drivers/CPP/Src/phaseEstimater.cpp **** 	if((rate_of_change+10) > (avg_rate_of_change>>10)) motor->corr_rotor_phase = prev_phase + 10;
 994              		.loc 1 319 2 is_stmt 1 view .LVU311
 995              		.loc 1 319 6 is_stmt 0 view .LVU312
 996 0158 5F4B     		ldr	r3, .L90+40
 997 015a B3F90010 		ldrsh	r1, [r3]
 998              		.loc 1 319 25 view .LVU313
 999 015e 01F10903 		add	r3, r1, #9
 1000              		.loc 1 319 46 view .LVU314
 1001 0162 5E48     		ldr	r0, .L90+44
 1002 0164 0068     		ldr	r0, [r0]
 1003              		.loc 1 319 2 view .LVU315
 1004 0166 B3EBA02F 		cmp	r3, r0, asr #10
 1005 016a C0F2FF80 		blt	.L72
 1006              		.loc 1 319 53 is_stmt 1 discriminator 1 view .LVU316
 1007              		.loc 1 319 90 is_stmt 0 discriminator 1 view .LVU317
 1008 016e 0A32     		adds	r2, r2, #10
 1009              		.loc 1 319 77 discriminator 1 view .LVU318
 1010 0170 6280     		strh	r2, [r4, #2]	@ movhi
 1011              	.L73:
 320:Drivers/CPP/Src/phaseEstimater.cpp **** 	else{ motor->corr_rotor_phase=motor->rotorphase;}
 321:Drivers/CPP/Src/phaseEstimater.cpp **** 	
 322:Drivers/CPP/Src/phaseEstimater.cpp **** 	// avg rate of change is 10 bits to the left for fixed point calculations
 323:Drivers/CPP/Src/phaseEstimater.cpp **** 	avg_rate_of_change = ((avg_rate_of_change*1023) + (rate_of_change<<10)) >>10;
 1012              		.loc 1 323 2 is_stmt 1 view .LVU319
 1013              		.loc 1 323 43 is_stmt 0 view .LVU320
 1014 0172 5A4A     		ldr	r2, .L90+44
 1015 0174 1368     		ldr	r3, [r2]
 1016 0176 C3EB8323 		rsb	r3, r3, r3, lsl #10
 1017              		.loc 1 323 50 view .LVU321
 1018 017a 03EB8123 		add	r3, r3, r1, lsl #10
 1019              		.loc 1 323 74 view .LVU322
 1020 017e 9B12     		asrs	r3, r3, #10
 1021              		.loc 1 323 21 view .LVU323
 1022 0180 1360     		str	r3, [r2]
 324:Drivers/CPP/Src/phaseEstimater.cpp **** 	
 325:Drivers/CPP/Src/phaseEstimater.cpp **** 	prev_phase = motor->corr_rotor_phase;
 1023              		.loc 1 325 2 is_stmt 1 view .LVU324
 1024              		.loc 1 325 22 is_stmt 0 view .LVU325
 1025 0182 6288     		ldrh	r2, [r4, #2]
 1026              		.loc 1 325 13 view .LVU326
 1027 0184 534B     		ldr	r3, .L90+36
 1028 0186 1A80     		strh	r2, [r3]	@ movhi
 326:Drivers/CPP/Src/phaseEstimater.cpp **** }
 1029              		.loc 1 326 1 view .LVU327
 1030 0188 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 26


 1031              	.LVL70:
 1032              	.L89:
 198:Drivers/CPP/Src/phaseEstimater.cpp **** 		init=1;
 1033              		.loc 1 198 3 is_stmt 1 view .LVU328
 198:Drivers/CPP/Src/phaseEstimater.cpp **** 		init=1;
 1034              		.loc 1 198 15 is_stmt 0 view .LVU329
 1035 018c FFF7FEFF 		bl	MX_TIM6_Init
 1036              	.LVL71:
 199:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1037              		.loc 1 199 3 is_stmt 1 view .LVU330
 199:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1038              		.loc 1 199 7 is_stmt 0 view .LVU331
 1039 0190 474B     		ldr	r3, .L90
 1040 0192 0122     		movs	r2, #1
 1041 0194 1A70     		strb	r2, [r3]
 1042 0196 3BE7     		b	.L51
 1043              	.LVL72:
 1044              	.L52:
 237:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=1;
 1045              		.loc 1 237 46 discriminator 3 view .LVU332
 1046 0198 5149     		ldr	r1, .L90+48
 1047 019a 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
 237:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=1;
 1048              		.loc 1 237 44 discriminator 3 view .LVU333
 1049 019c 39BB     		cbnz	r1, .L75
 238:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=0;
 1050              		.loc 1 238 3 is_stmt 1 view .LVU334
 238:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=0;
 1051              		.loc 1 238 13 is_stmt 0 view .LVU335
 1052 019e 5049     		ldr	r1, .L90+48
 1053 01a0 4FF00109 		mov	r9, #1
 1054 01a4 81F80090 		strb	r9, [r1]
 239:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=0;
 1055              		.loc 1 239 3 is_stmt 1 view .LVU336
 239:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=0;
 1056              		.loc 1 239 13 is_stmt 0 view .LVU337
 1057 01a8 0021     		movs	r1, #0
 1058 01aa DFF83891 		ldr	r9, .L90+52
 1059 01ae 89F80010 		strb	r1, [r9]
 240:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 1060              		.loc 1 240 3 is_stmt 1 view .LVU338
 240:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 1061              		.loc 1 240 13 is_stmt 0 view .LVU339
 1062 01b2 DFF83491 		ldr	r9, .L90+56
 1063 01b6 89F80010 		strb	r1, [r9]
 241:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1064              		.loc 1 241 3 is_stmt 1 view .LVU340
 241:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1065              		.loc 1 241 148 is_stmt 0 view .LVU341
 1066 01ba 60B9     		cbnz	r0, .L76
 241:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1067              		.loc 1 241 42 discriminator 2 view .LVU342
 1068 01bc 6FB9     		cbnz	r7, .L77
 241:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1069              		.loc 1 241 69 discriminator 4 view .LVU343
 1070 01be 76B9     		cbnz	r6, .L78
 241:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 27


 1071              		.loc 1 241 95 discriminator 6 view .LVU344
 1072 01c0 BCF1000F 		cmp	ip, #0
 1073 01c4 0DD1     		bne	.L79
 241:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1074              		.loc 1 241 122 discriminator 8 view .LVU345
 1075 01c6 BEF1000F 		cmp	lr, #0
 1076 01ca 0CD1     		bne	.L80
 241:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1077              		.loc 1 241 148 discriminator 10 view .LVU346
 1078 01cc B8F1000F 		cmp	r8, #0
 1079 01d0 0BD0     		beq	.L81
 241:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1080              		.loc 1 241 148 discriminator 11 view .LVU347
 1081 01d2 0121     		movs	r1, #1
 1082 01d4 6DE7     		b	.L53
 1083              	.L76:
 1084 01d6 0121     		movs	r1, #1
 1085 01d8 6BE7     		b	.L53
 1086              	.L77:
 1087 01da 0121     		movs	r1, #1
 1088 01dc 69E7     		b	.L53
 1089              	.L78:
 1090 01de 0121     		movs	r1, #1
 1091 01e0 67E7     		b	.L53
 1092              	.L79:
 1093 01e2 0121     		movs	r1, #1
 1094 01e4 65E7     		b	.L53
 1095              	.L80:
 1096 01e6 0121     		movs	r1, #1
 1097 01e8 63E7     		b	.L53
 1098              	.L81:
 241:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1099              		.loc 1 241 148 discriminator 12 view .LVU348
 1100 01ea 0021     		movs	r1, #0
 1101              	.LVL73:
 241:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1102              		.loc 1 241 148 discriminator 12 view .LVU349
 1103 01ec 61E7     		b	.L53
 1104              	.LVL74:
 1105              	.L75:
 230:Drivers/CPP/Src/phaseEstimater.cpp **** 
 1106              		.loc 1 230 10 view .LVU350
 1107 01ee 0021     		movs	r1, #0
 1108 01f0 5FE7     		b	.L53
 1109              	.LVL75:
 1110              	.L55:
 244:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=0;
 1111              		.loc 1 244 46 discriminator 3 view .LVU351
 1112 01f2 3C4A     		ldr	r2, .L90+52
 1113 01f4 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 244:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=0;
 1114              		.loc 1 244 44 discriminator 3 view .LVU352
 1115 01f6 002A     		cmp	r2, #0
 1116 01f8 7FF461AF 		bne	.L56
 245:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=1;
 1117              		.loc 1 245 3 is_stmt 1 view .LVU353
 245:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=1;
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 28


 1118              		.loc 1 245 13 is_stmt 0 view .LVU354
 1119 01fc 3849     		ldr	r1, .L90+48
 1120              	.LVL76:
 245:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=1;
 1121              		.loc 1 245 13 view .LVU355
 1122 01fe 0A70     		strb	r2, [r1]
 246:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=0;
 1123              		.loc 1 246 3 is_stmt 1 view .LVU356
 246:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=0;
 1124              		.loc 1 246 13 is_stmt 0 view .LVU357
 1125 0200 3849     		ldr	r1, .L90+52
 1126 0202 4FF00109 		mov	r9, #1
 1127 0206 81F80090 		strb	r9, [r1]
 247:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 1128              		.loc 1 247 3 is_stmt 1 view .LVU358
 247:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 1129              		.loc 1 247 13 is_stmt 0 view .LVU359
 1130 020a 3749     		ldr	r1, .L90+56
 1131 020c 0A70     		strb	r2, [r1]
 248:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1132              		.loc 1 248 3 is_stmt 1 view .LVU360
 248:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1133              		.loc 1 248 148 is_stmt 0 view .LVU361
 1134 020e 60B9     		cbnz	r0, .L82
 248:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1135              		.loc 1 248 42 discriminator 2 view .LVU362
 1136 0210 6FB9     		cbnz	r7, .L83
 248:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1137              		.loc 1 248 69 discriminator 4 view .LVU363
 1138 0212 76B9     		cbnz	r6, .L84
 248:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1139              		.loc 1 248 95 discriminator 6 view .LVU364
 1140 0214 BCF1000F 		cmp	ip, #0
 1141 0218 0DD1     		bne	.L85
 248:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1142              		.loc 1 248 122 discriminator 8 view .LVU365
 1143 021a BEF1000F 		cmp	lr, #0
 1144 021e 0CD1     		bne	.L86
 248:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1145              		.loc 1 248 148 discriminator 10 view .LVU366
 1146 0220 B8F1000F 		cmp	r8, #0
 1147 0224 0BD0     		beq	.L87
 248:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1148              		.loc 1 248 148 discriminator 11 view .LVU367
 1149 0226 4946     		mov	r1, r9
 1150 0228 49E7     		b	.L56
 1151              	.L82:
 1152 022a 0121     		movs	r1, #1
 1153 022c 47E7     		b	.L56
 1154              	.L83:
 1155 022e 0121     		movs	r1, #1
 1156 0230 45E7     		b	.L56
 1157              	.L84:
 1158 0232 0121     		movs	r1, #1
 1159 0234 43E7     		b	.L56
 1160              	.L85:
 1161 0236 0121     		movs	r1, #1
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 29


 1162 0238 41E7     		b	.L56
 1163              	.L86:
 1164 023a 0121     		movs	r1, #1
 1165 023c 3FE7     		b	.L56
 1166              	.L87:
 248:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1167              		.loc 1 248 148 discriminator 12 view .LVU368
 1168 023e 0021     		movs	r1, #0
 1169              	.LVL77:
 248:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1170              		.loc 1 248 148 discriminator 12 view .LVU369
 1171 0240 3DE7     		b	.L56
 1172              	.L58:
 251:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=0;
 1173              		.loc 1 251 46 discriminator 3 view .LVU370
 1174 0242 294B     		ldr	r3, .L90+56
 1175 0244 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 251:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL1=0;
 1176              		.loc 1 251 44 discriminator 3 view .LVU371
 1177 0246 002B     		cmp	r3, #0
 1178 0248 7FF43FAF 		bne	.L59
 252:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=0;
 1179              		.loc 1 252 3 is_stmt 1 view .LVU372
 252:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL2=0;
 1180              		.loc 1 252 13 is_stmt 0 view .LVU373
 1181 024c 244A     		ldr	r2, .L90+48
 1182 024e 1370     		strb	r3, [r2]
 253:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=1;
 1183              		.loc 1 253 3 is_stmt 1 view .LVU374
 253:Drivers/CPP/Src/phaseEstimater.cpp **** 		lock_HALL3=1;
 1184              		.loc 1 253 13 is_stmt 0 view .LVU375
 1185 0250 244A     		ldr	r2, .L90+52
 1186 0252 1370     		strb	r3, [r2]
 254:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 1187              		.loc 1 254 3 is_stmt 1 view .LVU376
 254:Drivers/CPP/Src/phaseEstimater.cpp **** 		valid_signals = (HALL1_rising_edge<<7) || (HALL1_falling_edge<<6) || (HALL2_rising_edge<<5) || (H
 1188              		.loc 1 254 13 is_stmt 0 view .LVU377
 1189 0254 244B     		ldr	r3, .L90+56
 1190 0256 0122     		movs	r2, #1
 1191 0258 1A70     		strb	r2, [r3]
 255:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1192              		.loc 1 255 3 is_stmt 1 view .LVU378
 255:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1193              		.loc 1 255 148 is_stmt 0 view .LVU379
 1194 025a 0028     		cmp	r0, #0
 1195 025c 7FF436AF 		bne	.L60
 255:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1196              		.loc 1 255 42 discriminator 2 view .LVU380
 1197 0260 002F     		cmp	r7, #0
 1198 0262 7FF433AF 		bne	.L60
 255:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1199              		.loc 1 255 69 discriminator 4 view .LVU381
 1200 0266 002E     		cmp	r6, #0
 1201 0268 7FF430AF 		bne	.L60
 255:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1202              		.loc 1 255 95 discriminator 6 view .LVU382
 1203 026c BCF1000F 		cmp	ip, #0
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 30


 1204 0270 7FF42CAF 		bne	.L60
 255:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1205              		.loc 1 255 122 discriminator 8 view .LVU383
 1206 0274 BEF1000F 		cmp	lr, #0
 1207 0278 7FF428AF 		bne	.L60
 255:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1208              		.loc 1 255 148 discriminator 10 view .LVU384
 1209 027c B8F1000F 		cmp	r8, #0
 1210 0280 7FF424AF 		bne	.L60
 1211 0284 38E7     		b	.L61
 1212              	.LVL78:
 1213              	.L64:
 276:Drivers/CPP/Src/phaseEstimater.cpp **** 				SectorTime = SectorTIM.Instance->CNT;							  // Secure the Sector Time
 1214              		.loc 1 276 5 is_stmt 1 view .LVU385
 276:Drivers/CPP/Src/phaseEstimater.cpp **** 				SectorTime = SectorTIM.Instance->CNT;							  // Secure the Sector Time
 1215              		.loc 1 276 59 is_stmt 0 view .LVU386
 1216 0286 194E     		ldr	r6, .L90+60
 1217 0288 36F81370 		ldrh	r7, [r6, r3, lsl #1]
 276:Drivers/CPP/Src/phaseEstimater.cpp **** 				SectorTime = SectorTIM.Instance->CNT;							  // Secure the Sector Time
 1218              		.loc 1 276 19 view .LVU387
 1219 028c 184E     		ldr	r6, .L90+64
 1220 028e 3688     		ldrh	r6, [r6]
 276:Drivers/CPP/Src/phaseEstimater.cpp **** 				SectorTime = SectorTIM.Instance->CNT;							  // Secure the Sector Time
 1221              		.loc 1 276 5 view .LVU388
 1222 0290 B6EB570F 		cmp	r6, r7, lsr #1
 1223 0294 FFF449AF 		bcc	.L65
 277:Drivers/CPP/Src/phaseEstimater.cpp **** 				Prev_Sector_times[PreviousHallSector] = SectorTime;				// The Measured Sector Time is form the 
 1224              		.loc 1 277 5 is_stmt 1 view .LVU389
 277:Drivers/CPP/Src/phaseEstimater.cpp **** 				Prev_Sector_times[PreviousHallSector] = SectorTime;				// The Measured Sector Time is form the 
 1225              		.loc 1 277 38 is_stmt 0 view .LVU390
 1226 0298 466A     		ldr	r6, [r0, #36]
 277:Drivers/CPP/Src/phaseEstimater.cpp **** 				Prev_Sector_times[PreviousHallSector] = SectorTime;				// The Measured Sector Time is form the 
 1227              		.loc 1 277 16 view .LVU391
 1228 029a B6B2     		uxth	r6, r6
 1229 029c 144F     		ldr	r7, .L90+64
 1230 029e 3E80     		strh	r6, [r7]	@ movhi
 278:Drivers/CPP/Src/phaseEstimater.cpp **** 				block_commutation_active=0;
 1231              		.loc 1 278 5 is_stmt 1 view .LVU392
 278:Drivers/CPP/Src/phaseEstimater.cpp **** 				block_commutation_active=0;
 1232              		.loc 1 278 43 is_stmt 0 view .LVU393
 1233 02a0 124F     		ldr	r7, .L90+60
 1234 02a2 27F81360 		strh	r6, [r7, r3, lsl #1]	@ movhi
 279:Drivers/CPP/Src/phaseEstimater.cpp **** 				}
 1235              		.loc 1 279 5 is_stmt 1 view .LVU394
 279:Drivers/CPP/Src/phaseEstimater.cpp **** 				}
 1236              		.loc 1 279 29 is_stmt 0 view .LVU395
 1237 02a6 0A4B     		ldr	r3, .L90+32
 1238 02a8 0026     		movs	r6, #0
 1239 02aa 1E70     		strb	r6, [r3]
 1240 02ac 3DE7     		b	.L65
 1241              	.L91:
 1242 02ae 00BF     		.align	2
 1243              	.L90:
 1244 02b0 00000000 		.word	_ZZ20estimate_rotor_phaseE4init
 1245 02b4 00000000 		.word	htim6
 1246 02b8 00000000 		.word	_ZZ20estimate_rotor_phaseE5HALL1
 1247 02bc 00000000 		.word	_ZZ20estimate_rotor_phaseE5HALL2
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 31


 1248 02c0 00080048 		.word	1207961600
 1249 02c4 00000000 		.word	_ZZ20estimate_rotor_phaseE10HallSector
 1250 02c8 00000000 		.word	HallSector_phase_offset
 1251 02cc 00000000 		.word	_ZZ20estimate_rotor_phaseE18PreviousHallSector
 1252 02d0 00000000 		.word	_ZL24block_commutation_active
 1253 02d4 00000000 		.word	_ZZ20estimate_rotor_phaseE10prev_phase
 1254 02d8 00000000 		.word	rate_of_change
 1255 02dc 00000000 		.word	avg_rate_of_change
 1256 02e0 00000000 		.word	_ZZ20estimate_rotor_phaseE10lock_HALL1
 1257 02e4 00000000 		.word	_ZZ20estimate_rotor_phaseE10lock_HALL2
 1258 02e8 00000000 		.word	_ZZ20estimate_rotor_phaseE10lock_HALL3
 1259 02ec 00000000 		.word	_ZL17Prev_Sector_times
 1260 02f0 00000000 		.word	_ZZ20estimate_rotor_phaseE10SectorTime
 1261 02f4 00000000 		.word	_ZZ20estimate_rotor_phaseE5HALL3
 1262              	.L66:
 291:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1263              		.loc 1 291 4 is_stmt 1 view .LVU396
 291:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1264              		.loc 1 291 33 is_stmt 0 view .LVU397
 1265 02f8 ABB2     		uxth	r3, r5
 291:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1266              		.loc 1 291 83 view .LVU398
 1267 02fa 1E48     		ldr	r0, .L92
 1268 02fc 30F81250 		ldrh	r5, [r0, r2, lsl #1]
 1269              	.LVL79:
 291:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1270              		.loc 1 291 50 view .LVU399
 1271 0300 05FB03F3 		mul	r3, r5, r3
 1272              	.LVL80:
 291:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1273              		.loc 1 291 114 view .LVU400
 1274 0304 1C4D     		ldr	r5, .L92+4
 1275 0306 35F81250 		ldrh	r5, [r5, r2, lsl #1]
 291:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1276              		.loc 1 291 85 view .LVU401
 1277 030a 93FBF5F3 		sdiv	r3, r3, r5
 291:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1278              		.loc 1 291 30 view .LVU402
 1279 030e 0B44     		add	r3, r3, r1
 1280 0310 9BB2     		uxth	r3, r3
 291:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1281              		.loc 1 291 21 view .LVU403
 1282 0312 2380     		strh	r3, [r4]	@ movhi
 292:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 1283              		.loc 1 292 4 is_stmt 1 view .LVU404
 292:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 1284              		.loc 1 292 67 is_stmt 0 view .LVU405
 1285 0314 30F81200 		ldrh	r0, [r0, r2, lsl #1]
 292:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 1286              		.loc 1 292 34 view .LVU406
 1287 0318 0D18     		adds	r5, r1, r0
 292:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 1288              		.loc 1 292 4 view .LVU407
 1289 031a AB42     		cmp	r3, r5
 1290 031c 7FF70DAF 		ble	.L67
 292:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 1291              		.loc 1 292 71 is_stmt 1 discriminator 1 view .LVU408
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 32


 292:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 1292              		.loc 1 292 88 is_stmt 0 discriminator 1 view .LVU409
 1293 0320 2580     		strh	r5, [r4]	@ movhi
 1294 0322 0AE7     		b	.L67
 1295              	.LVL81:
 1296              	.L62:
 297:Drivers/CPP/Src/phaseEstimater.cpp **** 		if(block_commutation_active){
 1297              		.loc 1 297 3 is_stmt 1 view .LVU410
 297:Drivers/CPP/Src/phaseEstimater.cpp **** 		if(block_commutation_active){
 1298              		.loc 1 297 36 is_stmt 0 view .LVU411
 1299 0324 154B     		ldr	r3, .L92+8
 1300 0326 1988     		ldrh	r1, [r3]
 1301              	.LVL82:
 297:Drivers/CPP/Src/phaseEstimater.cpp **** 		if(block_commutation_active){
 1302              		.loc 1 297 10 view .LVU412
 1303 0328 154B     		ldr	r3, .L92+12
 1304              	.LVL83:
 297:Drivers/CPP/Src/phaseEstimater.cpp **** 		if(block_commutation_active){
 1305              		.loc 1 297 10 view .LVU413
 1306 032a 33F81110 		ldrh	r1, [r3, r1, lsl #1]
 1307              	.LVL84:
 298:Drivers/CPP/Src/phaseEstimater.cpp **** 			motor->rotorphase = offset;
 1308              		.loc 1 298 3 is_stmt 1 view .LVU414
 298:Drivers/CPP/Src/phaseEstimater.cpp **** 			motor->rotorphase = offset;
 1309              		.loc 1 298 6 is_stmt 0 view .LVU415
 1310 032e 154B     		ldr	r3, .L92+16
 1311 0330 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 298:Drivers/CPP/Src/phaseEstimater.cpp **** 			motor->rotorphase = offset;
 1312              		.loc 1 298 3 view .LVU416
 1313 0332 0BB1     		cbz	r3, .L69
 299:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 1314              		.loc 1 299 4 is_stmt 1 view .LVU417
 299:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 1315              		.loc 1 299 22 is_stmt 0 view .LVU418
 1316 0334 2180     		strh	r1, [r4]	@ movhi
 1317 0336 02E7     		b	.L68
 1318              	.L69:
 302:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1319              		.loc 1 302 4 is_stmt 1 view .LVU419
 302:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1320              		.loc 1 302 33 is_stmt 0 view .LVU420
 1321 0338 ABB2     		uxth	r3, r5
 302:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1322              		.loc 1 302 83 view .LVU421
 1323 033a 0E48     		ldr	r0, .L92
 1324 033c 30F81250 		ldrh	r5, [r0, r2, lsl #1]
 1325              	.LVL85:
 302:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1326              		.loc 1 302 50 view .LVU422
 1327 0340 05FB03F3 		mul	r3, r5, r3
 1328              	.LVL86:
 302:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1329              		.loc 1 302 114 view .LVU423
 1330 0344 0C4D     		ldr	r5, .L92+4
 1331 0346 35F81250 		ldrh	r5, [r5, r2, lsl #1]
 302:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1332              		.loc 1 302 85 view .LVU424
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 33


 1333 034a 93FBF5F3 		sdiv	r3, r3, r5
 302:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1334              		.loc 1 302 30 view .LVU425
 1335 034e 0B44     		add	r3, r3, r1
 1336 0350 9BB2     		uxth	r3, r3
 302:Drivers/CPP/Src/phaseEstimater.cpp **** 			if(motor->rotorphase > (offset+HallSector_phase_span[HallSector])) motor->rotorphase= offset+Hal
 1337              		.loc 1 302 21 view .LVU426
 1338 0352 2380     		strh	r3, [r4]	@ movhi
 303:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 1339              		.loc 1 303 4 is_stmt 1 view .LVU427
 303:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 1340              		.loc 1 303 67 is_stmt 0 view .LVU428
 1341 0354 30F81220 		ldrh	r2, [r0, r2, lsl #1]
 303:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 1342              		.loc 1 303 34 view .LVU429
 1343 0358 8818     		adds	r0, r1, r2
 303:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 1344              		.loc 1 303 4 view .LVU430
 1345 035a 8342     		cmp	r3, r0
 1346 035c 7FF7EFAE 		ble	.L68
 303:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 1347              		.loc 1 303 71 is_stmt 1 discriminator 1 view .LVU431
 303:Drivers/CPP/Src/phaseEstimater.cpp **** 		}
 1348              		.loc 1 303 88 is_stmt 0 discriminator 1 view .LVU432
 1349 0360 2080     		strh	r0, [r4]	@ movhi
 1350 0362 ECE6     		b	.L68
 1351              	.LVL87:
 1352              	.L70:
 316:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1353              		.loc 1 316 3 is_stmt 1 view .LVU433
 316:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1354              		.loc 1 316 37 is_stmt 0 view .LVU434
 1355 0364 9B1A     		subs	r3, r3, r2
 316:Drivers/CPP/Src/phaseEstimater.cpp **** 	}
 1356              		.loc 1 316 18 view .LVU435
 1357 0366 0849     		ldr	r1, .L92+20
 1358 0368 0B80     		strh	r3, [r1]	@ movhi
 1359 036a F5E6     		b	.L71
 1360              	.L72:
 320:Drivers/CPP/Src/phaseEstimater.cpp **** 	
 1361              		.loc 1 320 8 is_stmt 1 view .LVU436
 320:Drivers/CPP/Src/phaseEstimater.cpp **** 	
 1362              		.loc 1 320 39 is_stmt 0 view .LVU437
 1363 036c 2388     		ldrh	r3, [r4]
 320:Drivers/CPP/Src/phaseEstimater.cpp **** 	
 1364              		.loc 1 320 31 view .LVU438
 1365 036e 6380     		strh	r3, [r4, #2]	@ movhi
 1366 0370 FFE6     		b	.L73
 1367              	.L93:
 1368 0372 00BF     		.align	2
 1369              	.L92:
 1370 0374 00000000 		.word	HallSector_phase_span
 1371 0378 00000000 		.word	_ZL17Prev_Sector_times
 1372 037c 00000000 		.word	_ZZ20estimate_rotor_phaseE18PreviousHallSector
 1373 0380 00000000 		.word	HallSector_phase_offset
 1374 0384 00000000 		.word	_ZL24block_commutation_active
 1375 0388 00000000 		.word	rate_of_change
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 34


 1376              		.cfi_endproc
 1377              	.LFE1277:
 1379              		.section	.bss._ZZ20estimate_rotor_phaseE10lock_HALL3,"aw",%nobits
 1382              	_ZZ20estimate_rotor_phaseE10lock_HALL3:
 1383 0000 00       		.space	1
 1384              		.section	.bss._ZZ20estimate_rotor_phaseE10lock_HALL2,"aw",%nobits
 1387              	_ZZ20estimate_rotor_phaseE10lock_HALL2:
 1388 0000 00       		.space	1
 1389              		.section	.bss._ZZ20estimate_rotor_phaseE10lock_HALL1,"aw",%nobits
 1392              	_ZZ20estimate_rotor_phaseE10lock_HALL1:
 1393 0000 00       		.space	1
 1394              		.section	.bss._ZZ20estimate_rotor_phaseE5HALL3,"aw",%nobits
 1397              	_ZZ20estimate_rotor_phaseE5HALL3:
 1398 0000 00       		.space	1
 1399              		.section	.bss._ZZ20estimate_rotor_phaseE5HALL2,"aw",%nobits
 1402              	_ZZ20estimate_rotor_phaseE5HALL2:
 1403 0000 00       		.space	1
 1404              		.section	.bss._ZZ20estimate_rotor_phaseE5HALL1,"aw",%nobits
 1407              	_ZZ20estimate_rotor_phaseE5HALL1:
 1408 0000 00       		.space	1
 1409              		.section	.bss._ZZ20estimate_rotor_phaseE10prev_phase,"aw",%nobits
 1410              		.align	1
 1413              	_ZZ20estimate_rotor_phaseE10prev_phase:
 1414 0000 0000     		.space	2
 1415              		.section	.bss._ZZ20estimate_rotor_phaseE18PreviousHallSector,"aw",%nobits
 1416              		.align	1
 1419              	_ZZ20estimate_rotor_phaseE18PreviousHallSector:
 1420 0000 0000     		.space	2
 1421              		.section	.bss._ZZ20estimate_rotor_phaseE10SectorTime,"aw",%nobits
 1422              		.align	1
 1425              	_ZZ20estimate_rotor_phaseE10SectorTime:
 1426 0000 0000     		.space	2
 1427              		.section	.bss._ZZ20estimate_rotor_phaseE10HallSector,"aw",%nobits
 1430              	_ZZ20estimate_rotor_phaseE10HallSector:
 1431 0000 00       		.space	1
 1432              		.section	.bss._ZZ20estimate_rotor_phaseE4init,"aw",%nobits
 1435              	_ZZ20estimate_rotor_phaseE4init:
 1436 0000 00       		.space	1
 1437              		.global	avg_rate_of_change
 1438              		.section	.data.avg_rate_of_change,"aw"
 1439              		.align	2
 1442              	avg_rate_of_change:
 1443 0000 00040000 		.word	1024
 1444              		.global	rate_of_change
 1445              		.section	.bss.rate_of_change,"aw",%nobits
 1446              		.align	1
 1449              	rate_of_change:
 1450 0000 0000     		.space	2
 1451              		.section	.bss._ZL17Prev_Sector_times,"aw",%nobits
 1452              		.align	2
 1455              	_ZL17Prev_Sector_times:
 1456 0000 00000000 		.space	16
 1456      00000000 
 1456      00000000 
 1456      00000000 
 1457              		.section	.data._ZL24block_commutation_active,"aw"
 1460              	_ZL24block_commutation_active:
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 35


 1461 0000 01       		.byte	1
 1462              		.section	.bss._ZZ37initialize_Hallsensor_phase_estimatorE11prev_Sector,"aw",%nobits
 1465              	_ZZ37initialize_Hallsensor_phase_estimatorE11prev_Sector:
 1466 0000 00       		.space	1
 1467              		.section	.bss._ZZ37initialize_Hallsensor_phase_estimatorE9phase_old,"aw",%nobits
 1468              		.align	1
 1471              	_ZZ37initialize_Hallsensor_phase_estimatorE9phase_old:
 1472 0000 0000     		.space	2
 1473              		.section	.bss._ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL3,"aw",%nobits
 1476              	_ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL3:
 1477 0000 00       		.space	1
 1478              		.section	.bss._ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL2,"aw",%nobits
 1481              	_ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL2:
 1482 0000 00       		.space	1
 1483              		.section	.bss._ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL1,"aw",%nobits
 1486              	_ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL1:
 1487 0000 00       		.space	1
 1488              		.section	.bss._ZZ37initialize_Hallsensor_phase_estimatorE4init,"aw",%nobits
 1491              	_ZZ37initialize_Hallsensor_phase_estimatorE4init:
 1492 0000 00       		.space	1
 1493              		.section	.bss._ZZ37initialize_Hallsensor_phase_estimatorE13voltage_phase,"aw",%nobits
 1494              		.align	1
 1497              	_ZZ37initialize_Hallsensor_phase_estimatorE13voltage_phase:
 1498 0000 0000     		.space	2
 1499              		.global	HALL3
 1500              		.section	.bss.HALL3,"aw",%nobits
 1503              	HALL3:
 1504 0000 00       		.space	1
 1505              		.global	HALL2
 1506              		.section	.bss.HALL2,"aw",%nobits
 1509              	HALL2:
 1510 0000 00       		.space	1
 1511              		.global	HALL1
 1512              		.section	.bss.HALL1,"aw",%nobits
 1515              	HALL1:
 1516 0000 00       		.space	1
 1517              		.global	time_between_sectors
 1518              		.section	.bss.time_between_sectors,"aw",%nobits
 1519              		.align	1
 1522              	time_between_sectors:
 1523 0000 0000     		.space	2
 1524              		.global	HallSector_phase_span
 1525              		.section	.bss.HallSector_phase_span,"aw",%nobits
 1526              		.align	2
 1529              	HallSector_phase_span:
 1530 0000 00000000 		.space	16
 1530      00000000 
 1530      00000000 
 1530      00000000 
 1531              		.global	HallSector_phase_offset
 1532              		.section	.data.HallSector_phase_offset,"aw"
 1533              		.align	2
 1536              	HallSector_phase_offset:
 1537 0000 FF00     		.short	255
 1538 0002 00000000 		.space	14
 1538      00000000 
 1538      00000000 
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 36


 1538      0000
 1539              		.global	HallSector_Averages
 1540              		.section	.data.HallSector_Averages,"aw"
 1541              		.align	2
 1544              	HallSector_Averages:
 1545 0000 0100     		.short	1
 1546 0002 00000000 		.space	14
 1546      00000000 
 1546      00000000 
 1546      0000
 1547              		.text
 1548              	.Letext0:
 1549              		.file 2 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/..
 1550              		.file 3 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/..
 1551              		.file 4 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g474xx.h"
 1552              		.file 5 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/in
 1553              		.file 6 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 1554              		.file 7 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_gpio.h"
 1555              		.file 8 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 1556              		.file 9 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_tim.h"
 1557              		.file 10 "Drivers/CPP/Inc/global_var.h"
 1558              		.file 11 "Core/Inc/tim.h"
 1559              		.file 12 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 1560              		.file 13 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 1561              		.file 14 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 1562              		.file 15 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 1563              		.file 16 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 1564              		.file 17 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 1565              		.file 18 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 1566              		.file 19 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 1567              		.file 20 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 1568              		.file 21 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 1569              		.file 22 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 1570              		.file 23 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 1571              		.file 24 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 1572              		.file 25 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 1573              		.file 26 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 1574              		.file 27 "Drivers/CPP/Inc/SVM.h"
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 37


DEFINED SYMBOLS
                            *ABS*:00000000 phaseEstimater.cpp
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:21     .text.init_phase_estimater:00000000 $t
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:27     .text.init_phase_estimater:00000000 init_phase_estimater
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:73     .text.init_phase_estimater:00000038 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:78     .text.initialize_Hallsensor_phase_estimator:00000000 $t
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:84     .text.initialize_Hallsensor_phase_estimator:00000000 initialize_Hallsensor_phase_estimator
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:639    .text.initialize_Hallsensor_phase_estimator:000002a8 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1491   .bss._ZZ37initialize_Hallsensor_phase_estimatorE4init:00000000 _ZZ37initialize_Hallsensor_phase_estimatorE4init
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1497   .bss._ZZ37initialize_Hallsensor_phase_estimatorE13voltage_phase:00000000 _ZZ37initialize_Hallsensor_phase_estimatorE13voltage_phase
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1515   .bss.HALL1:00000000 HALL1
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1509   .bss.HALL2:00000000 HALL2
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1471   .bss._ZZ37initialize_Hallsensor_phase_estimatorE9phase_old:00000000 _ZZ37initialize_Hallsensor_phase_estimatorE9phase_old
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1522   .bss.time_between_sectors:00000000 time_between_sectors
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1544   .data.HallSector_Averages:00000000 HallSector_Averages
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1536   .data.HallSector_phase_offset:00000000 HallSector_phase_offset
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1465   .bss._ZZ37initialize_Hallsensor_phase_estimatorE11prev_Sector:00000000 _ZZ37initialize_Hallsensor_phase_estimatorE11prev_Sector
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1529   .bss.HallSector_phase_span:00000000 HallSector_phase_span
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1486   .bss._ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL1:00000000 _ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL1
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1481   .bss._ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL2:00000000 _ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL2
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1476   .bss._ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL3:00000000 _ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL3
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1503   .bss.HALL3:00000000 HALL3
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:663    .text.initialize_Hallsensor_phase_estimator:000002f0 $t
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:699    .text.initialize_Hallsensor_phase_estimator:00000314 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:707    .text.estimate_rotor_phase:00000000 $t
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:713    .text.estimate_rotor_phase:00000000 estimate_rotor_phase
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1244   .text.estimate_rotor_phase:000002b0 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1435   .bss._ZZ20estimate_rotor_phaseE4init:00000000 _ZZ20estimate_rotor_phaseE4init
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1407   .bss._ZZ20estimate_rotor_phaseE5HALL1:00000000 _ZZ20estimate_rotor_phaseE5HALL1
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1402   .bss._ZZ20estimate_rotor_phaseE5HALL2:00000000 _ZZ20estimate_rotor_phaseE5HALL2
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1430   .bss._ZZ20estimate_rotor_phaseE10HallSector:00000000 _ZZ20estimate_rotor_phaseE10HallSector
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1419   .bss._ZZ20estimate_rotor_phaseE18PreviousHallSector:00000000 _ZZ20estimate_rotor_phaseE18PreviousHallSector
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1460   .data._ZL24block_commutation_active:00000000 _ZL24block_commutation_active
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1413   .bss._ZZ20estimate_rotor_phaseE10prev_phase:00000000 _ZZ20estimate_rotor_phaseE10prev_phase
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1449   .bss.rate_of_change:00000000 rate_of_change
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1442   .data.avg_rate_of_change:00000000 avg_rate_of_change
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1392   .bss._ZZ20estimate_rotor_phaseE10lock_HALL1:00000000 _ZZ20estimate_rotor_phaseE10lock_HALL1
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1387   .bss._ZZ20estimate_rotor_phaseE10lock_HALL2:00000000 _ZZ20estimate_rotor_phaseE10lock_HALL2
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1382   .bss._ZZ20estimate_rotor_phaseE10lock_HALL3:00000000 _ZZ20estimate_rotor_phaseE10lock_HALL3
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1455   .bss._ZL17Prev_Sector_times:00000000 _ZL17Prev_Sector_times
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1425   .bss._ZZ20estimate_rotor_phaseE10SectorTime:00000000 _ZZ20estimate_rotor_phaseE10SectorTime
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1397   .bss._ZZ20estimate_rotor_phaseE5HALL3:00000000 _ZZ20estimate_rotor_phaseE5HALL3
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1265   .text.estimate_rotor_phase:000002f8 $t
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1370   .text.estimate_rotor_phase:00000374 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1383   .bss._ZZ20estimate_rotor_phaseE10lock_HALL3:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1388   .bss._ZZ20estimate_rotor_phaseE10lock_HALL2:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1393   .bss._ZZ20estimate_rotor_phaseE10lock_HALL1:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1398   .bss._ZZ20estimate_rotor_phaseE5HALL3:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1403   .bss._ZZ20estimate_rotor_phaseE5HALL2:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1408   .bss._ZZ20estimate_rotor_phaseE5HALL1:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1410   .bss._ZZ20estimate_rotor_phaseE10prev_phase:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1416   .bss._ZZ20estimate_rotor_phaseE18PreviousHallSector:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1422   .bss._ZZ20estimate_rotor_phaseE10SectorTime:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1431   .bss._ZZ20estimate_rotor_phaseE10HallSector:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1436   .bss._ZZ20estimate_rotor_phaseE4init:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1439   .data.avg_rate_of_change:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1446   .bss.rate_of_change:00000000 $d
ARM GAS  C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s 			page 38


C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1452   .bss._ZL17Prev_Sector_times:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1466   .bss._ZZ37initialize_Hallsensor_phase_estimatorE11prev_Sector:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1468   .bss._ZZ37initialize_Hallsensor_phase_estimatorE9phase_old:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1477   .bss._ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL3:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1482   .bss._ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL2:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1487   .bss._ZZ37initialize_Hallsensor_phase_estimatorE10lock_HALL1:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1492   .bss._ZZ37initialize_Hallsensor_phase_estimatorE4init:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1494   .bss._ZZ37initialize_Hallsensor_phase_estimatorE13voltage_phase:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1504   .bss.HALL3:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1510   .bss.HALL2:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1516   .bss.HALL1:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1519   .bss.time_between_sectors:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1526   .bss.HallSector_phase_span:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1533   .data.HallSector_phase_offset:00000000 $d
C:\Users\Simon\AppData\Local\Temp\cc9mRZU9.s:1541   .data.HallSector_Averages:00000000 $d

UNDEFINED SYMBOLS
htim6
HAL_GPIO_ReadPin
HAL_GPIO_TogglePin
setVoltageVector
Motor
MX_TIM6_Init
