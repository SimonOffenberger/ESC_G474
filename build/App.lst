ARM GAS  C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"App.cpp"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/CPP/Src/App.cpp"
  20              		.section	.text._Z10PI_controll,"ax",%progbits
  21              		.align	1
  22              		.global	_Z10PI_controll
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	_Z10PI_controll:
  28              	.LVL0:
  29              	.LFB1273:
   1:Core/CPP/Src/App.cpp **** #include "App.hpp"
   2:Core/CPP/Src/App.cpp **** #include "main.h"
   3:Core/CPP/Src/App.cpp **** 
   4:Core/CPP/Src/App.cpp **** #include "SVM.h"
   5:Core/CPP/Src/App.cpp **** #include "phaseEstimater.h"
   6:Core/CPP/Src/App.cpp **** #include "tim.h"
   7:Core/CPP/Src/App.cpp **** #include "Park_u_Clark.h"
   8:Core/CPP/Src/App.cpp **** #include <math.h>
   9:Core/CPP/Src/App.cpp **** #include "encoder.h"
  10:Core/CPP/Src/App.cpp **** #include "uart_debug.h"
  11:Core/CPP/Src/App.cpp **** 
  12:Core/CPP/Src/App.cpp **** 
  13:Core/CPP/Src/App.cpp **** #define PI_Control_k 1
  14:Core/CPP/Src/App.cpp **** 
  15:Core/CPP/Src/App.cpp **** int16_t PI_control(int32_t error)
  16:Core/CPP/Src/App.cpp **** {
  30              		.loc 1 16 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  17:Core/CPP/Src/App.cpp ****   return (error * PI_Control_k) >> 10;
  35              		.loc 1 17 3 view .LVU1
  18:Core/CPP/Src/App.cpp **** }
  36              		.loc 1 18 1 is_stmt 0 view .LVU2
  37 0000 40F38F20 		sbfx	r0, r0, #10, #16
  38              	.LVL1:
  39              		.loc 1 18 1 view .LVU3
  40 0004 7047     		bx	lr
ARM GAS  C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s 			page 2


  41              		.cfi_endproc
  42              	.LFE1273:
  44              		.section	.text.App_Init,"ax",%progbits
  45              		.align	1
  46              		.global	App_Init
  47              		.syntax unified
  48              		.thumb
  49              		.thumb_func
  51              	App_Init:
  52              	.LFB1274:
  19:Core/CPP/Src/App.cpp **** 
  20:Core/CPP/Src/App.cpp **** uint16_t TIM_PSC = 0;
  21:Core/CPP/Src/App.cpp **** int32_t phaseshift = 90;
  22:Core/CPP/Src/App.cpp **** uint16_t setpoint = 20;
  23:Core/CPP/Src/App.cpp **** 
  24:Core/CPP/Src/App.cpp **** extern "C" void App_Init(void)
  25:Core/CPP/Src/App.cpp **** {
  53              		.loc 1 25 1 is_stmt 1 view -0
  54              		.cfi_startproc
  55              		@ args = 0, pretend = 0, frame = 0
  56              		@ frame_needed = 0, uses_anonymous_args = 0
  57 0000 08B5     		push	{r3, lr}
  58              	.LCFI0:
  59              		.cfi_def_cfa_offset 8
  60              		.cfi_offset 3, -8
  61              		.cfi_offset 14, -4
  26:Core/CPP/Src/App.cpp ****   initSVM(PWM_Frequency);
  62              		.loc 1 26 3 view .LVU5
  63              		.loc 1 26 10 is_stmt 0 view .LVU6
  64 0002 4CF25030 		movw	r0, #50000
  65 0006 FFF7FEFF 		bl	initSVM
  66              	.LVL2:
  27:Core/CPP/Src/App.cpp ****   init_phase_estimater();
  67              		.loc 1 27 3 is_stmt 1 view .LVU7
  68              		.loc 1 27 23 is_stmt 0 view .LVU8
  69 000a FFF7FEFF 		bl	init_phase_estimater
  70              	.LVL3:
  28:Core/CPP/Src/App.cpp **** }
  71              		.loc 1 28 1 view .LVU9
  72 000e 08BD     		pop	{r3, pc}
  73              		.cfi_endproc
  74              	.LFE1274:
  76              		.section	.text.App_Process,"ax",%progbits
  77              		.align	1
  78              		.global	App_Process
  79              		.syntax unified
  80              		.thumb
  81              		.thumb_func
  83              	App_Process:
  84              	.LFB1275:
  29:Core/CPP/Src/App.cpp **** 
  30:Core/CPP/Src/App.cpp **** extern "C" void App_Process(void)
  31:Core/CPP/Src/App.cpp **** {
  85              		.loc 1 31 1 is_stmt 1 view -0
  86              		.cfi_startproc
  87              		@ args = 0, pretend = 0, frame = 0
  88              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s 			page 3


  89 0000 10B5     		push	{r4, lr}
  90              	.LCFI1:
  91              		.cfi_def_cfa_offset 8
  92              		.cfi_offset 4, -8
  93              		.cfi_offset 14, -4
  94 0002 82B0     		sub	sp, sp, #8
  95              	.LCFI2:
  96              		.cfi_def_cfa_offset 16
  32:Core/CPP/Src/App.cpp ****     static uint8_t init_done = 0;
  97              		.loc 1 32 5 view .LVU11
  33:Core/CPP/Src/App.cpp **** 
  34:Core/CPP/Src/App.cpp ****     setpoint = (uint16_t)readEncoder(GPIOA, GPIO_PIN_0,
  98              		.loc 1 34 5 view .LVU12
  99              		.loc 1 34 37 is_stmt 0 view .LVU13
 100 0004 0023     		movs	r3, #0
 101 0006 0193     		str	r3, [sp, #4]
 102 0008 FF23     		movs	r3, #255
 103 000a 0093     		str	r3, [sp]
 104 000c 0223     		movs	r3, #2
 105 000e 4FF09042 		mov	r2, #1207959552
 106 0012 0121     		movs	r1, #1
 107 0014 1046     		mov	r0, r2
 108 0016 FFF7FEFF 		bl	readEncoder
 109              	.LVL4:
 110              		.loc 1 34 14 discriminator 1 view .LVU14
 111 001a 80B2     		uxth	r0, r0
 112 001c 174B     		ldr	r3, .L10
 113 001e 1880     		strh	r0, [r3]	@ movhi
  35:Core/CPP/Src/App.cpp ****                                      GPIOA, GPIO_PIN_1, 255, 0);
  36:Core/CPP/Src/App.cpp **** 
  37:Core/CPP/Src/App.cpp ****     if (!init_done)
 114              		.loc 1 37 5 is_stmt 1 view .LVU15
 115              		.loc 1 37 9 is_stmt 0 view .LVU16
 116 0020 174B     		ldr	r3, .L10+4
 117 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 118              		.loc 1 37 5 view .LVU17
 119 0024 2BB9     		cbnz	r3, .L5
  38:Core/CPP/Src/App.cpp ****     {
  39:Core/CPP/Src/App.cpp ****       init_done = initialize_Hallsensor_phase_estimator(setpoint);
 120              		.loc 1 39 7 is_stmt 1 view .LVU18
 121              		.loc 1 39 56 is_stmt 0 view .LVU19
 122 0026 FFF7FEFF 		bl	initialize_Hallsensor_phase_estimator
 123              	.LVL5:
 124              		.loc 1 39 17 discriminator 1 view .LVU20
 125 002a 154B     		ldr	r3, .L10+4
 126 002c 1870     		strb	r0, [r3]
 127              	.L4:
  40:Core/CPP/Src/App.cpp ****     }
  41:Core/CPP/Src/App.cpp ****     else
  42:Core/CPP/Src/App.cpp ****     {
  43:Core/CPP/Src/App.cpp **** 
  44:Core/CPP/Src/App.cpp ****       estimate_rotor_phase(&Motor);
  45:Core/CPP/Src/App.cpp **** 
  46:Core/CPP/Src/App.cpp ****       phaseshift += PI_control(-Motor.MotorCurrents.DQCurrenst[1]);
  47:Core/CPP/Src/App.cpp **** 
  48:Core/CPP/Src/App.cpp ****       if (phaseshift > 100)
  49:Core/CPP/Src/App.cpp ****         phaseshift = 80;
ARM GAS  C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s 			page 4


  50:Core/CPP/Src/App.cpp ****       if (phaseshift < 80)
  51:Core/CPP/Src/App.cpp ****         phaseshift = 60;
  52:Core/CPP/Src/App.cpp **** 
  53:Core/CPP/Src/App.cpp ****       setVoltageVector(Motor.rotorphase, phaseshift, setpoint);
  54:Core/CPP/Src/App.cpp **** 
  55:Core/CPP/Src/App.cpp ****       //UART_transmit_buffer();
  56:Core/CPP/Src/App.cpp **** 
  57:Core/CPP/Src/App.cpp ****       TIM_PSC = SectorTIM.Instance->ARR;
  58:Core/CPP/Src/App.cpp ****     }
  59:Core/CPP/Src/App.cpp **** }
 128              		.loc 1 59 1 view .LVU21
 129 002e 02B0     		add	sp, sp, #8
 130              	.LCFI3:
 131              		.cfi_remember_state
 132              		.cfi_def_cfa_offset 8
 133              		@ sp needed
 134 0030 10BD     		pop	{r4, pc}
 135              	.L5:
 136              	.LCFI4:
 137              		.cfi_restore_state
  44:Core/CPP/Src/App.cpp **** 
 138              		.loc 1 44 7 is_stmt 1 view .LVU22
  44:Core/CPP/Src/App.cpp **** 
 139              		.loc 1 44 27 is_stmt 0 view .LVU23
 140 0032 144C     		ldr	r4, .L10+8
 141 0034 2046     		mov	r0, r4
 142 0036 FFF7FEFF 		bl	estimate_rotor_phase
 143              	.LVL6:
  46:Core/CPP/Src/App.cpp **** 
 144              		.loc 1 46 7 is_stmt 1 view .LVU24
  46:Core/CPP/Src/App.cpp **** 
 145              		.loc 1 46 65 is_stmt 0 view .LVU25
 146 003a A068     		ldr	r0, [r4, #8]
  46:Core/CPP/Src/App.cpp **** 
 147              		.loc 1 46 31 view .LVU26
 148 003c 4042     		rsbs	r0, r0, #0
 149 003e FFF7FEFF 		bl	_Z10PI_controll
 150              	.LVL7:
  46:Core/CPP/Src/App.cpp **** 
 151              		.loc 1 46 18 discriminator 1 view .LVU27
 152 0042 114B     		ldr	r3, .L10+12
 153 0044 1A68     		ldr	r2, [r3]
 154 0046 1044     		add	r0, r0, r2
 155 0048 1860     		str	r0, [r3]
  48:Core/CPP/Src/App.cpp ****         phaseshift = 80;
 156              		.loc 1 48 7 is_stmt 1 view .LVU28
 157 004a 6428     		cmp	r0, #100
 158 004c 01DD     		ble	.L7
  49:Core/CPP/Src/App.cpp ****       if (phaseshift < 80)
 159              		.loc 1 49 9 view .LVU29
  49:Core/CPP/Src/App.cpp ****       if (phaseshift < 80)
 160              		.loc 1 49 20 is_stmt 0 view .LVU30
 161 004e 5022     		movs	r2, #80
 162 0050 1A60     		str	r2, [r3]
 163              	.L7:
  50:Core/CPP/Src/App.cpp ****         phaseshift = 60;
 164              		.loc 1 50 7 is_stmt 1 view .LVU31
ARM GAS  C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s 			page 5


  50:Core/CPP/Src/App.cpp ****         phaseshift = 60;
 165              		.loc 1 50 22 is_stmt 0 view .LVU32
 166 0052 0D4B     		ldr	r3, .L10+12
 167 0054 1B68     		ldr	r3, [r3]
  50:Core/CPP/Src/App.cpp ****         phaseshift = 60;
 168              		.loc 1 50 7 view .LVU33
 169 0056 4F2B     		cmp	r3, #79
 170 0058 02DC     		bgt	.L8
  51:Core/CPP/Src/App.cpp **** 
 171              		.loc 1 51 9 is_stmt 1 view .LVU34
  51:Core/CPP/Src/App.cpp **** 
 172              		.loc 1 51 20 is_stmt 0 view .LVU35
 173 005a 0B4B     		ldr	r3, .L10+12
 174 005c 3C22     		movs	r2, #60
 175 005e 1A60     		str	r2, [r3]
 176              	.L8:
  53:Core/CPP/Src/App.cpp **** 
 177              		.loc 1 53 7 is_stmt 1 view .LVU36
  53:Core/CPP/Src/App.cpp **** 
 178              		.loc 1 53 23 is_stmt 0 view .LVU37
 179 0060 064B     		ldr	r3, .L10
 180 0062 1A88     		ldrh	r2, [r3]
 181 0064 084B     		ldr	r3, .L10+12
 182 0066 1968     		ldr	r1, [r3]
 183 0068 064B     		ldr	r3, .L10+8
 184 006a 1888     		ldrh	r0, [r3]
 185 006c FFF7FEFF 		bl	setVoltageVector
 186              	.LVL8:
  57:Core/CPP/Src/App.cpp ****     }
 187              		.loc 1 57 7 is_stmt 1 view .LVU38
  57:Core/CPP/Src/App.cpp ****     }
 188              		.loc 1 57 27 is_stmt 0 view .LVU39
 189 0070 064B     		ldr	r3, .L10+16
 190 0072 1B68     		ldr	r3, [r3]
  57:Core/CPP/Src/App.cpp ****     }
 191              		.loc 1 57 37 view .LVU40
 192 0074 DA6A     		ldr	r2, [r3, #44]
  57:Core/CPP/Src/App.cpp ****     }
 193              		.loc 1 57 15 view .LVU41
 194 0076 064B     		ldr	r3, .L10+20
 195 0078 1A80     		strh	r2, [r3]	@ movhi
 196              		.loc 1 59 1 view .LVU42
 197 007a D8E7     		b	.L4
 198              	.L11:
 199              		.align	2
 200              	.L10:
 201 007c 00000000 		.word	setpoint
 202 0080 00000000 		.word	_ZZ11App_ProcessE9init_done
 203 0084 00000000 		.word	Motor
 204 0088 00000000 		.word	phaseshift
 205 008c 00000000 		.word	htim6
 206 0090 00000000 		.word	TIM_PSC
 207              		.cfi_endproc
 208              	.LFE1275:
 210              		.section	.bss._ZZ11App_ProcessE9init_done,"aw",%nobits
 213              	_ZZ11App_ProcessE9init_done:
 214 0000 00       		.space	1
ARM GAS  C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s 			page 6


 215              		.global	setpoint
 216              		.section	.data.setpoint,"aw"
 217              		.align	1
 220              	setpoint:
 221 0000 1400     		.short	20
 222              		.global	phaseshift
 223              		.section	.data.phaseshift,"aw"
 224              		.align	2
 227              	phaseshift:
 228 0000 5A000000 		.word	90
 229              		.global	TIM_PSC
 230              		.section	.bss.TIM_PSC,"aw",%nobits
 231              		.align	1
 234              	TIM_PSC:
 235 0000 0000     		.space	2
 236              		.text
 237              	.Letext0:
 238              		.file 2 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/..
 239              		.file 3 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/..
 240              		.file 4 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g474xx.h"
 241              		.file 5 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 242              		.file 6 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 243              		.file 7 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_tim.h"
 244              		.file 8 "Drivers/CPP/Inc/global_var.h"
 245              		.file 9 "Core/Inc/tim.h"
 246              		.file 10 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 247              		.file 11 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 248              		.file 12 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 249              		.file 13 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 250              		.file 14 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 251              		.file 15 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 252              		.file 16 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 253              		.file 17 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 254              		.file 18 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 255              		.file 19 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 256              		.file 20 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 257              		.file 21 "C:\\ST\\STM32CubeCLT_1.20.0\\GNU-tools-for-STM32\\bin\\../lib/gcc/arm-none-eabi/13.3.1/.
 258              		.file 22 "Drivers/CPP/Inc/SVM.h"
 259              		.file 23 "Drivers/CPP/Inc/phaseEstimater.h"
 260              		.file 24 "Drivers/CPP/Inc/encoder.h"
ARM GAS  C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 App.cpp
C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s:21     .text._Z10PI_controll:00000000 $t
C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s:27     .text._Z10PI_controll:00000000 _Z10PI_controll
C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s:45     .text.App_Init:00000000 $t
C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s:51     .text.App_Init:00000000 App_Init
C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s:77     .text.App_Process:00000000 $t
C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s:83     .text.App_Process:00000000 App_Process
C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s:201    .text.App_Process:0000007c $d
C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s:220    .data.setpoint:00000000 setpoint
C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s:213    .bss._ZZ11App_ProcessE9init_done:00000000 _ZZ11App_ProcessE9init_done
C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s:227    .data.phaseshift:00000000 phaseshift
C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s:234    .bss.TIM_PSC:00000000 TIM_PSC
C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s:214    .bss._ZZ11App_ProcessE9init_done:00000000 $d
C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s:217    .data.setpoint:00000000 $d
C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s:224    .data.phaseshift:00000000 $d
C:\Users\Simon\AppData\Local\Temp\ccBVDL31.s:231    .bss.TIM_PSC:00000000 $d

UNDEFINED SYMBOLS
initSVM
init_phase_estimater
readEncoder
initialize_Hallsensor_phase_estimator
estimate_rotor_phase
setVoltageVector
Motor
htim6
